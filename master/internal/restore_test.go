package internal

import (
	"testing"

	"github.com/stretchr/testify/require"

	"github.com/determined-ai/determined/master/pkg/ptrs"
	"github.com/determined-ai/determined/master/pkg/schemas/expconf"
	"github.com/determined-ai/determined/master/pkg/searcher"
)

func TestShimExperimentSnapshotV4(t *testing.T) {
	//nolint:lll // Much more readable this way, than a hundreds of lines of formatted JSON.
	snapshot := []byte(`{"searcher_state": {"rand": {"key": [2970094109, 656686882, 618108684, 3428065983, 3347811667, 2888225350, 3059306387, 3429410465, 120474970, 2272301777, 985108865, 991558874, 3272543769, 1573748485, 942809215, 3888215743, 2210951765, 1718115507, 3963921664, 3557444060, 1499923783, 1829703377, 750493200, 3411092685, 589595500, 2596144409, 1879328096, 1280550458, 2715466210, 2544141428, 1543312021, 2997818084, 765128503, 536629897, 1001278031, 956821445, 2736363088, 947342293, 3898485884, 3425929255, 356849665, 3772908806, 3623557158, 2612581302, 3580922597, 217692149, 2059015628, 2096894728, 1031554394, 2656443257, 856730792, 2596152358, 3710976744, 3544672276, 1734608805, 481137749, 969621572, 754645566, 4116998116, 79516852, 3779707014, 84449565, 2299776967, 3049981717, 209980308, 730595889, 475796649, 176283770, 945344397, 3533051341, 1815446302, 3773966474, 2608085762, 3988702430, 1364580973, 954047394, 3612132653, 772541827, 644272441, 189803165, 931375382, 345347493, 1070927534, 1233280688, 2977342360, 964860546, 311939975, 4227569059, 1111154497, 2670796852, 2936307495, 1340846895, 2187526044, 4049656992, 2523649560, 3366534695, 4129435744, 2210183795, 1260247727, 3172172609, 845427714, 2412303263, 4029524955, 496281340, 1521525374, 1068147028, 715985502, 4093783277, 2159512480, 133552717, 436985375, 3034348399, 1875037974, 4060219881, 2429216519, 1706838315, 3704003030, 1782549491, 3768045061, 3989593374, 93865362, 1767865857, 1137597591, 252302268, 3084248212, 619916972, 4054361685, 2046158286, 1812194877, 3286982519, 3624326839, 2208625006, 3161233673, 3006516503, 2024883981, 1656495788, 587227161, 3021529118, 3172394998, 3398906615, 615744671, 3472224112, 212954520, 1118562041, 1921307781, 1197366600, 1484195533, 1200554730, 729716373, 1652264122, 1007315030, 2434524607, 585522965, 1141433277, 278327678, 3497727325, 356102370, 1394639384, 1857470125, 735035053, 2157227949, 2119739569, 171894210, 839804861, 1047866560, 420010537, 1667233883, 352520083, 1757099499, 2384088069, 251603325, 4218299275, 3730818711, 1003235663, 299940149, 2645812204, 2480727500, 1622974487, 1629312940, 3982198086, 2956489407, 2625953102, 1319536795, 42594099, 1983096735, 973960638, 3621842015, 3277003271, 2353057652, 181048897, 971058611, 596055263, 916085615, 181371615, 1523808158, 1627674241, 1944135612, 1287953114, 427398813, 3657156653, 2038254583, 1728892774, 2979810975, 1203810426, 870115982, 2342890482, 239526972, 161374077, 1298609642, 3361627384, 1120507760, 2857852335, 1817591908, 2278524994, 2381282828, 390752450, 2583666345, 2894166573, 1090621184, 1216468230, 2471775878, 4007164892, 4120390730, 2245347208, 1747432849, 2659194233, 3123421709, 1394627981, 3642599365, 447037831, 2948358439, 2071590290, 620060883, 1189294322, 865221550, 1072574172, 4239383229, 3932654708, 977824870, 4090083517, 996564545, 2215368799, 1639088756, 1063294874, 2589869379, 2931882145, 1119478531, 2913543435, 2863960600, 2220278034, 1514566588, 2171894117, 1040890154, 613591648, 4213726618, 3733950164, 3557521554, 451572785, 1963683489, 2910238750, 1724590625, 2276900333, 2786477774, 194531157, 2427295372, 2668452276, 3024832162, 4118825874, 2048453723, 602839057, 1287626269, 391207769, 1490752784, 631791025, 3012581026, 2165558496, 711793093, 394391602, 3030359078, 753489044, 1912791312, 805796394, 3405161241, 2387156388, 3012369288, 785079410, 1579291678, 2186594177, 1466653116, 2597054161, 2032480878, 2608593331, 245623596, 4030340391, 4102274438, 1820069747, 861878589, 1987396926, 1234162528, 4203068184, 4247911765, 675763300, 776602741, 2725860139, 1101969549, 2417348663, 3640520171, 4117232477, 1498968755, 1465742592, 978609897, 207663660, 3872867123, 2345883885, 3859129626, 2085742042, 2849699660, 766128209, 1220321488, 4036832842, 2625520262, 1672441713, 68307500, 1664835655, 4277760737, 2834495524, 1659112114, 4058377674, 3503936154, 3460939589, 1534417391, 546891454, 2119405354, 1342659996, 4063240713, 2470735676, 4263599371, 1004146457, 4110714736, 161171862, 3755105332, 2045654769, 3373580076, 3804959282, 172165195, 1513507373, 756508282, 2395802730, 1042880862, 424954450, 3528754016, 705074650, 1657675167, 3512260741, 1502017722, 3914739402, 2193244645, 2422500613, 99094108, 2136256596, 2765564582, 1469408647, 422762387, 4256532504, 2587902689, 322034733, 869598360, 1591826706, 3537194108, 432319981, 3238387140, 3998122956, 1638675667, 2820632381, 2704736212, 1001829652, 3842914244, 2163956861, 1247332102, 4161816793, 1047179830, 3332934466, 3373357404, 1755466786, 2066857771, 3041960543, 1984594045, 2873866111, 625922821, 2084260334, 647387503, 1795267011, 2734649093, 1429118207, 1763491842, 2499417212, 1322753865, 2546278618, 3069808828, 2758040961, 2095345089, 1117531393, 1079149953, 199028389, 5727143, 2626507809, 1394644924, 2371859674, 3378009021, 663183580, 1964126253, 4253076758, 1951862122, 3318205484, 246506769, 2065283265, 4062893977, 1357669276, 1910189941, 1768248614, 2642642591, 3082965658, 2821926795, 3387815148, 3811042618, 47443245, 1219528119, 2554982004, 3265451419, 2888244446, 4219157977, 970880074, 1607338684, 3191412771, 2649941819, 3075671217, 1402753481, 4075173340, 1295557797, 911791588, 847594689, 2359505701, 3661496760, 733404895, 249867897, 1640333750, 582965187, 1381547711, 2657453162, 1011026771, 2180307770, 52701968, 2169192963, 3746362727, 509530176, 4097693696, 406641367, 2522117714, 2016171603, 2069773173, 3084060900, 1332397153, 1412022588, 1875059352, 3676296777, 3375212542, 1306176142, 133024327, 2608708004, 139194617, 519502757, 1353538952, 3608390217, 3046145872, 1399364698, 4125351745, 572217286, 2142672378, 2889903141, 3434412210, 2393320012, 3956475466, 562179437, 3542566562, 3807446953, 1580557399, 3614175239, 3960865405, 3703717660, 2310530500, 1372501162, 3987983520, 2273295537, 3041676882, 1184238826, 1347025024, 1978741180, 1085872423, 3721856454, 4017856803, 3452381717, 2476724512, 3844971453, 3783643616, 1806640004, 945069700, 146817685, 3591154906, 3316795159, 3055211927, 3538095801, 2794589177, 2749831736, 3448467389, 2625023521, 183144251, 1181880302, 2668701387, 1211953638, 2740205019, 1424192308, 3005227360, 3518579311, 2030094765, 2163439322, 528876425, 713989960, 49680970, 3843683734, 2284197334, 754118913, 3660862775, 2811591585, 1900142815, 909665247, 3587945731, 1738555018, 4017103008, 363980482, 3596395463, 4036688775, 562009149, 652191781, 3255386890, 742878000, 9948449, 1293599923, 3198724758, 1824688996, 971993200, 545911088, 3111974979, 548678661, 3540201872, 347949716, 3899497825, 3919059349, 4023520489, 3906867502, 2926287461, 1975024135, 1961216548, 4241655703, 882861834, 447828602, 1073917811, 3204969134, 3637120523, 2561353660, 3087651888, 2625085299, 3045978593, 3296945077, 3353240266, 264317791, 3618427144, 3041663648, 3129441565, 1614617882, 742204376, 107307162, 4015043056, 164246162, 2971078786, 3420066832, 1704293461, 459244372, 744914593, 710366705, 2599447851, 3652089701, 712803605, 2980013293, 476563708, 1665840194, 1037190002, 3225477896, 1430942116, 2632665368, 3730881422, 1625879865, 363179597, 3829523707, 14110766, 1150504976, 2891936857, 256611346, 774302498, 184441060, 803067320, 3354307461, 2067530913, 466995748, 1177075098, 4068208859, 1923629384, 3949860772, 3830641659, 1017128665, 2972991357, 4238922926, 575232160, 101928834, 2405116568], "pos": 5}, "exits": {}, "failures": {}, "shutdown": false, "trials_closed": {}, "trial_progress": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": 0}, "trials_created": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": true}, "trials_requested": 1, "search_method_state": {"created_trials": 1, "pending_trials": 1, "search_method_type": "single"}, "completed_operations": {}}, "trial_searcher_state": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": {"Op": {"Length": {"batches": 937}, "RequestID": "bb239c3a-c6b5-4ef3-ba7b-118038bd0d06"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.25, "dropout2": 0.5, "n_filters1": 32, "n_filters2": 64, "learning_rate": 1, "global_batch_size": 64}, "checkpoint": null, "request_id": "bb239c3a-c6b5-4ef3-ba7b-118038bd0d06", "trial_seed": 1757369869, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}}}`)
	//nolint:lll // Same.
	newSnapshot := []byte(`{"searcher_state": {"rand": {"key": [2970094109, 656686882, 618108684, 3428065983, 3347811667, 2888225350, 3059306387, 3429410465, 120474970, 2272301777, 985108865, 991558874, 3272543769, 1573748485, 942809215, 3888215743, 2210951765, 1718115507, 3963921664, 3557444060, 1499923783, 1829703377, 750493200, 3411092685, 589595500, 2596144409, 1879328096, 1280550458, 2715466210, 2544141428, 1543312021, 2997818084, 765128503, 536629897, 1001278031, 956821445, 2736363088, 947342293, 3898485884, 3425929255, 356849665, 3772908806, 3623557158, 2612581302, 3580922597, 217692149, 2059015628, 2096894728, 1031554394, 2656443257, 856730792, 2596152358, 3710976744, 3544672276, 1734608805, 481137749, 969621572, 754645566, 4116998116, 79516852, 3779707014, 84449565, 2299776967, 3049981717, 209980308, 730595889, 475796649, 176283770, 945344397, 3533051341, 1815446302, 3773966474, 2608085762, 3988702430, 1364580973, 954047394, 3612132653, 772541827, 644272441, 189803165, 931375382, 345347493, 1070927534, 1233280688, 2977342360, 964860546, 311939975, 4227569059, 1111154497, 2670796852, 2936307495, 1340846895, 2187526044, 4049656992, 2523649560, 3366534695, 4129435744, 2210183795, 1260247727, 3172172609, 845427714, 2412303263, 4029524955, 496281340, 1521525374, 1068147028, 715985502, 4093783277, 2159512480, 133552717, 436985375, 3034348399, 1875037974, 4060219881, 2429216519, 1706838315, 3704003030, 1782549491, 3768045061, 3989593374, 93865362, 1767865857, 1137597591, 252302268, 3084248212, 619916972, 4054361685, 2046158286, 1812194877, 3286982519, 3624326839, 2208625006, 3161233673, 3006516503, 2024883981, 1656495788, 587227161, 3021529118, 3172394998, 3398906615, 615744671, 3472224112, 212954520, 1118562041, 1921307781, 1197366600, 1484195533, 1200554730, 729716373, 1652264122, 1007315030, 2434524607, 585522965, 1141433277, 278327678, 3497727325, 356102370, 1394639384, 1857470125, 735035053, 2157227949, 2119739569, 171894210, 839804861, 1047866560, 420010537, 1667233883, 352520083, 1757099499, 2384088069, 251603325, 4218299275, 3730818711, 1003235663, 299940149, 2645812204, 2480727500, 1622974487, 1629312940, 3982198086, 2956489407, 2625953102, 1319536795, 42594099, 1983096735, 973960638, 3621842015, 3277003271, 2353057652, 181048897, 971058611, 596055263, 916085615, 181371615, 1523808158, 1627674241, 1944135612, 1287953114, 427398813, 3657156653, 2038254583, 1728892774, 2979810975, 1203810426, 870115982, 2342890482, 239526972, 161374077, 1298609642, 3361627384, 1120507760, 2857852335, 1817591908, 2278524994, 2381282828, 390752450, 2583666345, 2894166573, 1090621184, 1216468230, 2471775878, 4007164892, 4120390730, 2245347208, 1747432849, 2659194233, 3123421709, 1394627981, 3642599365, 447037831, 2948358439, 2071590290, 620060883, 1189294322, 865221550, 1072574172, 4239383229, 3932654708, 977824870, 4090083517, 996564545, 2215368799, 1639088756, 1063294874, 2589869379, 2931882145, 1119478531, 2913543435, 2863960600, 2220278034, 1514566588, 2171894117, 1040890154, 613591648, 4213726618, 3733950164, 3557521554, 451572785, 1963683489, 2910238750, 1724590625, 2276900333, 2786477774, 194531157, 2427295372, 2668452276, 3024832162, 4118825874, 2048453723, 602839057, 1287626269, 391207769, 1490752784, 631791025, 3012581026, 2165558496, 711793093, 394391602, 3030359078, 753489044, 1912791312, 805796394, 3405161241, 2387156388, 3012369288, 785079410, 1579291678, 2186594177, 1466653116, 2597054161, 2032480878, 2608593331, 245623596, 4030340391, 4102274438, 1820069747, 861878589, 1987396926, 1234162528, 4203068184, 4247911765, 675763300, 776602741, 2725860139, 1101969549, 2417348663, 3640520171, 4117232477, 1498968755, 1465742592, 978609897, 207663660, 3872867123, 2345883885, 3859129626, 2085742042, 2849699660, 766128209, 1220321488, 4036832842, 2625520262, 1672441713, 68307500, 1664835655, 4277760737, 2834495524, 1659112114, 4058377674, 3503936154, 3460939589, 1534417391, 546891454, 2119405354, 1342659996, 4063240713, 2470735676, 4263599371, 1004146457, 4110714736, 161171862, 3755105332, 2045654769, 3373580076, 3804959282, 172165195, 1513507373, 756508282, 2395802730, 1042880862, 424954450, 3528754016, 705074650, 1657675167, 3512260741, 1502017722, 3914739402, 2193244645, 2422500613, 99094108, 2136256596, 2765564582, 1469408647, 422762387, 4256532504, 2587902689, 322034733, 869598360, 1591826706, 3537194108, 432319981, 3238387140, 3998122956, 1638675667, 2820632381, 2704736212, 1001829652, 3842914244, 2163956861, 1247332102, 4161816793, 1047179830, 3332934466, 3373357404, 1755466786, 2066857771, 3041960543, 1984594045, 2873866111, 625922821, 2084260334, 647387503, 1795267011, 2734649093, 1429118207, 1763491842, 2499417212, 1322753865, 2546278618, 3069808828, 2758040961, 2095345089, 1117531393, 1079149953, 199028389, 5727143, 2626507809, 1394644924, 2371859674, 3378009021, 663183580, 1964126253, 4253076758, 1951862122, 3318205484, 246506769, 2065283265, 4062893977, 1357669276, 1910189941, 1768248614, 2642642591, 3082965658, 2821926795, 3387815148, 3811042618, 47443245, 1219528119, 2554982004, 3265451419, 2888244446, 4219157977, 970880074, 1607338684, 3191412771, 2649941819, 3075671217, 1402753481, 4075173340, 1295557797, 911791588, 847594689, 2359505701, 3661496760, 733404895, 249867897, 1640333750, 582965187, 1381547711, 2657453162, 1011026771, 2180307770, 52701968, 2169192963, 3746362727, 509530176, 4097693696, 406641367, 2522117714, 2016171603, 2069773173, 3084060900, 1332397153, 1412022588, 1875059352, 3676296777, 3375212542, 1306176142, 133024327, 2608708004, 139194617, 519502757, 1353538952, 3608390217, 3046145872, 1399364698, 4125351745, 572217286, 2142672378, 2889903141, 3434412210, 2393320012, 3956475466, 562179437, 3542566562, 3807446953, 1580557399, 3614175239, 3960865405, 3703717660, 2310530500, 1372501162, 3987983520, 2273295537, 3041676882, 1184238826, 1347025024, 1978741180, 1085872423, 3721856454, 4017856803, 3452381717, 2476724512, 3844971453, 3783643616, 1806640004, 945069700, 146817685, 3591154906, 3316795159, 3055211927, 3538095801, 2794589177, 2749831736, 3448467389, 2625023521, 183144251, 1181880302, 2668701387, 1211953638, 2740205019, 1424192308, 3005227360, 3518579311, 2030094765, 2163439322, 528876425, 713989960, 49680970, 3843683734, 2284197334, 754118913, 3660862775, 2811591585, 1900142815, 909665247, 3587945731, 1738555018, 4017103008, 363980482, 3596395463, 4036688775, 562009149, 652191781, 3255386890, 742878000, 9948449, 1293599923, 3198724758, 1824688996, 971993200, 545911088, 3111974979, 548678661, 3540201872, 347949716, 3899497825, 3919059349, 4023520489, 3906867502, 2926287461, 1975024135, 1961216548, 4241655703, 882861834, 447828602, 1073917811, 3204969134, 3637120523, 2561353660, 3087651888, 2625085299, 3045978593, 3296945077, 3353240266, 264317791, 3618427144, 3041663648, 3129441565, 1614617882, 742204376, 107307162, 4015043056, 164246162, 2971078786, 3420066832, 1704293461, 459244372, 744914593, 710366705, 2599447851, 3652089701, 712803605, 2980013293, 476563708, 1665840194, 1037190002, 3225477896, 1430942116, 2632665368, 3730881422, 1625879865, 363179597, 3829523707, 14110766, 1150504976, 2891936857, 256611346, 774302498, 184441060, 803067320, 3354307461, 2067530913, 466995748, 1177075098, 4068208859, 1923629384, 3949860772, 3830641659, 1017128665, 2972991357, 4238922926, 575232160, 101928834, 2405116568], "pos": 5}, "exits": {}, "failures": {}, "shutdown": false, "trials_closed": {}, "trial_progress": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": 0}, "trials_created": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": true}, "trials_requested": 1, "search_method_state": {"created_trials": 1, "pending_trials": 1, "search_method_type": "single"}, "completed_operations": {}}, "trial_searcher_state": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": {"Op": {"Length": 937, "RequestID": "bb239c3a-c6b5-4ef3-ba7b-118038bd0d06"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.25, "dropout2": 0.5, "n_filters1": 32, "n_filters2": 64, "learning_rate": 1, "global_batch_size": 64}, "checkpoint": null, "request_id": "bb239c3a-c6b5-4ef3-ba7b-118038bd0d06", "trial_seed": 1757369869, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}}}`)
	actual, err := shimExperimentSnapshotV4(1, snapshot)
	require.NoError(t, err)
	require.JSONEq(t, string(newSnapshot), string(actual))
}

// xxx: fix this
func TestShimExperimentSnapshotV5(t *testing.T) {
	cases := []struct {
		name       searcher.SearchMethodType
		v4Snapshot []byte
		v5Snapshot []byte
	}{
		{
			name: searcher.SingleSearch,
			//nolint:lll
			v4Snapshot: []byte(`{"searcher_state": {"rand": {"key": [7351957, 668824649, 3633593321, 2679790817, 1571958900, 29326558, 291308949, 244206053, 3701092594, 3882210279, 2707498650, 133465014, 4102645679, 1342381608, 1711122, 997157670, 1940213684, 591299768, 4261105009, 317504013, 2739087222, 3202030911, 1145664599, 241061119, 3624685680, 2084142872, 4122143045, 1514177169, 1396039012, 518569075, 4276668646, 220627113, 4259759680, 865047570, 565133468, 499601723, 1757600345, 165897748, 346008583, 3998052394, 2880832497, 2394434150, 3536883438, 3321718526, 2762564220, 1464693866, 3831360003, 3815251721, 2471707432, 2754047743, 3754914510, 3340724623, 3370481776, 1878712279, 4023799493, 2689173779, 3683411174, 2061210648, 210451510, 1161972629, 2626191760, 3574752113, 3158660199, 3222340181, 1039715658, 2104423713, 3227770477, 3738080641, 349230177, 2343429556, 347545905, 3938118964, 2685742914, 3610265790, 3669788713, 3523857657, 4181933672, 3019255764, 11225864, 587312025, 2953326182, 3821624078, 1342855173, 4088375427, 1581149596, 1284874676, 468629893, 2200964688, 2643378831, 3947748838, 1885846176, 2726140255, 3801113502, 789336429, 1393662252, 3832232672, 3728177303, 2462627849, 800895572, 3105046690, 2107741827, 3165089004, 4024981529, 789261403, 1385829096, 3156789379, 629095347, 4007197365, 77668972, 2596277624, 2143646570, 505671575, 4046275867, 673162708, 1410758788, 742880950, 1060474601, 1746553309, 3570355175, 2200891964, 1043362604, 2569239305, 2246241728, 2523247936, 1369322596, 3291696930, 3468687179, 1562592108, 2264369681, 665123586, 3668768667, 4132836202, 7262388, 3935907928, 2608309252, 2724409859, 3297910925, 30226626, 1313706056, 204799575, 2320332034, 4243099517, 3944090335, 3150470320, 984262031, 567625869, 1224307445, 2274103463, 3003246268, 1603897924, 3106694756, 2337046206, 393570753, 1364043610, 1976346980, 1865067202, 236124117, 2628342538, 2751701024, 4276184062, 2266887694, 4251560927, 3824788314, 245984110, 937800278, 1399424637, 3779571379, 3684712564, 859470768, 1327722996, 3456012119, 1725688059, 3269354450, 272275849, 3393855479, 1647464845, 1432245973, 1376192634, 1102097256, 4136551650, 2619895212, 204078247, 294927979, 1597111039, 2284794607, 2639673309, 1126667175, 656153600, 714153924, 2189396400, 2464091214, 688838472, 3176763718, 2416015239, 2922033521, 3063181328, 1769916390, 1990918144, 2961156083, 2020496145, 845209505, 3546098334, 3525528981, 1898129869, 3079687442, 3044495778, 1479743777, 3956494033, 1363366757, 884920661, 2914185645, 498681820, 3856266799, 3757186725, 2535737749, 3466961914, 3422632974, 1695104662, 96498663, 870376405, 1513173856, 2865924005, 996568861, 2701556073, 2472622152, 2930243987, 613471860, 1966618876, 529316315, 1842842249, 1460318807, 4221351224, 2406744690, 3565719403, 1523096109, 2707238705, 3766647807, 3714618830, 1574404357, 3618618296, 1220736790, 320811005, 2869346109, 3541341675, 4019927608, 2087172614, 1452327382, 3709444104, 4100729973, 83747395, 2706183745, 2853996590, 87393972, 1640565655, 1871158210, 2305214775, 988160028, 2070387655, 1304145766, 2933775496, 3584099842, 1340258645, 1949042725, 4222260874, 1550208332, 1773410213, 3612413448, 974195084, 3256256750, 2708537210, 2916168957, 886663626, 428157225, 2543777680, 4240376882, 4149644100, 2879835430, 3658265830, 1215778563, 1059274039, 3872346764, 1953124425, 4103988361, 3324038326, 2193352004, 15943688, 3208539936, 3486535767, 581790208, 2161718352, 3836029858, 2445213474, 2189475230, 4274552862, 3768452644, 2643212001, 2421948022, 66512686, 24733056, 2589895311, 2412638843, 3335361913, 830903978, 2159853905, 3252044215, 3979098146, 3259562139, 2616395181, 2262335217, 3893678386, 1119689087, 49662106, 2604976692, 3104842128, 591432896, 2920276550, 4283275384, 886126074, 1699638022, 1211132273, 2994848802, 3431763664, 3743304643, 1743121259, 1259014106, 3762137341, 3671979499, 2921723106, 2603349153, 1123612798, 3044707769, 3627980126, 2387810885, 3765233584, 2667185982, 3387896959, 3389146180, 759626192, 2970753347, 2624895367, 1323356570, 3912412792, 3730159740, 1850604665, 2530817507, 2330263274, 542843181, 783543768, 1754931073, 3401982301, 807582271, 16052305, 1722366308, 3386952517, 3895706500, 4129711633, 595925607, 2249492156, 101013764, 1697433744, 2812225880, 3668427550, 1330160512, 3702015631, 2842352029, 488481236, 4115125792, 3831093607, 4225259833, 2613345325, 2291820630, 4189148895, 444119893, 2179127584, 4024386402, 1528488865, 2750425904, 3695809707, 3063555749, 4279085228, 2254418136, 4117203865, 815563395, 1446696405, 1504647152, 748680691, 3645435086, 499955125, 2674750097, 93379365, 2247105618, 3984625961, 986622593, 716829732, 2473461041, 1114948394, 1076917711, 3097967358, 988590137, 3010790245, 240731431, 2164434723, 3881599295, 2862840338, 4279817959, 1925020093, 2191107008, 914258587, 3669212353, 2520920520, 2079545235, 582188844, 346120152, 3184633232, 3353888611, 394625592, 3890411236, 172050742, 1989955914, 2647285978, 3288034033, 3550084791, 3547385369, 2505798039, 2843998720, 563917230, 1153981379, 3096694044, 2780560134, 1263350731, 968267719, 3951334205, 169095454, 1240476617, 444283336, 764019256, 389576043, 1836779546, 752821322, 1126110028, 713971479, 3534847468, 194314000, 683165381, 2732422766, 3183954124, 3864200834, 2621986336, 3795983692, 1529686388, 2487601000, 1711420163, 1566176999, 1359040129, 2067465155, 1461729153, 3093358493, 3186582209, 632389802, 1195883065, 3514422422, 211795326, 870805576, 1391256376, 1191874417, 3359206561, 2364361478, 901432403, 1940147340, 1045329360, 3140146006, 1661491656, 1185711148, 3624253240, 3501428733, 3622708706, 40484727, 3348116889, 2487552500, 4210164322, 2249091920, 1619421611, 1731736081, 426056499, 1591270903, 2597498947, 4081408549, 3797663287, 1041039230, 3600535396, 4550629, 1394150954, 3030651107, 1031090806, 3274483012, 3683380709, 83922666, 2425469145, 1755624591, 409998106, 2144665595, 2980165974, 73465167, 2303798150, 3767653929, 3135373609, 3445204649, 2369717170, 2087342446, 3492983019, 3961933546, 1030699621, 2636310241, 174541054, 271021193, 2360437190, 425954896, 92882486, 1833674440, 3991235350, 2893495002, 2539985818, 3468070898, 4209531222, 1925888400, 3300100939, 3686894476, 3293440681, 391287521, 2842375627, 3952215622, 423880194, 2673835478, 148976674, 3773758668, 2067482288, 1883706511, 3844943561, 2306795071, 1867670956, 1854954723, 2911488642, 3737677576, 1647995695, 616826769, 745797093, 3937726990, 2172916496, 4250263727, 742994023, 3470802990, 354803681, 587022804, 1647881441, 50232099, 3453193200, 2628535047, 359139617, 1853326747, 3323757818, 468387681, 2990412705, 2404729437, 2780566445, 834788458, 2777314366, 676991284, 351545479, 2136723498, 1201909971, 201588508, 1233528184, 2815597135, 3180025368, 1063203580, 595314744, 22873402, 3368646960, 4153592600, 1975738420, 1394177576, 426543919, 183530114, 1935282914, 1882535771, 861482297, 1114738297, 464906562, 434377147, 3230333604, 3381538414, 2567181168, 969935752, 1872256728, 2623183805, 2027497016, 3841876981, 276182684, 2465935645, 2302905570, 3461134956, 3856374091, 2714970507, 3173354471, 779476968, 4114836869, 567498311, 260142177, 3771974584, 1929713490, 3125152075, 1594583079, 3686708108, 4037083805, 1373248501, 3365403464, 4061958294, 2970083971, 2808614097, 1389445106, 1965574599, 4012234832, 1365689605, 3640709722], "pos": 5}, "exits": {}, "cancels": {}, "failures": {}, "shutdown": false, "trials_closed": {}, "trial_progress": {"9c6e3038-30cc-4f45-ad2b-0d52b0c669e4": 0}, "trials_created": {"9c6e3038-30cc-4f45-ad2b-0d52b0c669e4": true}, "trials_requested": 1, "search_method_state": {"created_trials": 1, "pending_trials": 1, "search_method_type": "single"}, "completed_operations": {}}, "trial_searcher_state": {"9c6e3038-30cc-4f45-ad2b-0d52b0c669e4": {"Op": {"Length": 1000, "RequestID": "9c6e3038-30cc-4f45-ad2b-0d52b0c669e4"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.25, "dropout2": 0.5, "n_filters1": 32, "n_filters2": 64, "learning_rate": 1}, "checkpoint": null, "request_id": "9c6e3038-30cc-4f45-ad2b-0d52b0c669e4", "trial_seed": 179934364, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}}}`),
			//nolint:lll
			v5Snapshot: []byte(`{"searcher_state": {"rand": {"key": [7351957, 668824649, 3633593321, 2679790817, 1571958900, 29326558, 291308949, 244206053, 3701092594, 3882210279, 2707498650, 133465014, 4102645679, 1342381608, 1711122, 997157670, 1940213684, 591299768, 4261105009, 317504013, 2739087222, 3202030911, 1145664599, 241061119, 3624685680, 2084142872, 4122143045, 1514177169, 1396039012, 518569075, 4276668646, 220627113, 4259759680, 865047570, 565133468, 499601723, 1757600345, 165897748, 346008583, 3998052394, 2880832497, 2394434150, 3536883438, 3321718526, 2762564220, 1464693866, 3831360003, 3815251721, 2471707432, 2754047743, 3754914510, 3340724623, 3370481776, 1878712279, 4023799493, 2689173779, 3683411174, 2061210648, 210451510, 1161972629, 2626191760, 3574752113, 3158660199, 3222340181, 1039715658, 2104423713, 3227770477, 3738080641, 349230177, 2343429556, 347545905, 3938118964, 2685742914, 3610265790, 3669788713, 3523857657, 4181933672, 3019255764, 11225864, 587312025, 2953326182, 3821624078, 1342855173, 4088375427, 1581149596, 1284874676, 468629893, 2200964688, 2643378831, 3947748838, 1885846176, 2726140255, 3801113502, 789336429, 1393662252, 3832232672, 3728177303, 2462627849, 800895572, 3105046690, 2107741827, 3165089004, 4024981529, 789261403, 1385829096, 3156789379, 629095347, 4007197365, 77668972, 2596277624, 2143646570, 505671575, 4046275867, 673162708, 1410758788, 742880950, 1060474601, 1746553309, 3570355175, 2200891964, 1043362604, 2569239305, 2246241728, 2523247936, 1369322596, 3291696930, 3468687179, 1562592108, 2264369681, 665123586, 3668768667, 4132836202, 7262388, 3935907928, 2608309252, 2724409859, 3297910925, 30226626, 1313706056, 204799575, 2320332034, 4243099517, 3944090335, 3150470320, 984262031, 567625869, 1224307445, 2274103463, 3003246268, 1603897924, 3106694756, 2337046206, 393570753, 1364043610, 1976346980, 1865067202, 236124117, 2628342538, 2751701024, 4276184062, 2266887694, 4251560927, 3824788314, 245984110, 937800278, 1399424637, 3779571379, 3684712564, 859470768, 1327722996, 3456012119, 1725688059, 3269354450, 272275849, 3393855479, 1647464845, 1432245973, 1376192634, 1102097256, 4136551650, 2619895212, 204078247, 294927979, 1597111039, 2284794607, 2639673309, 1126667175, 656153600, 714153924, 2189396400, 2464091214, 688838472, 3176763718, 2416015239, 2922033521, 3063181328, 1769916390, 1990918144, 2961156083, 2020496145, 845209505, 3546098334, 3525528981, 1898129869, 3079687442, 3044495778, 1479743777, 3956494033, 1363366757, 884920661, 2914185645, 498681820, 3856266799, 3757186725, 2535737749, 3466961914, 3422632974, 1695104662, 96498663, 870376405, 1513173856, 2865924005, 996568861, 2701556073, 2472622152, 2930243987, 613471860, 1966618876, 529316315, 1842842249, 1460318807, 4221351224, 2406744690, 3565719403, 1523096109, 2707238705, 3766647807, 3714618830, 1574404357, 3618618296, 1220736790, 320811005, 2869346109, 3541341675, 4019927608, 2087172614, 1452327382, 3709444104, 4100729973, 83747395, 2706183745, 2853996590, 87393972, 1640565655, 1871158210, 2305214775, 988160028, 2070387655, 1304145766, 2933775496, 3584099842, 1340258645, 1949042725, 4222260874, 1550208332, 1773410213, 3612413448, 974195084, 3256256750, 2708537210, 2916168957, 886663626, 428157225, 2543777680, 4240376882, 4149644100, 2879835430, 3658265830, 1215778563, 1059274039, 3872346764, 1953124425, 4103988361, 3324038326, 2193352004, 15943688, 3208539936, 3486535767, 581790208, 2161718352, 3836029858, 2445213474, 2189475230, 4274552862, 3768452644, 2643212001, 2421948022, 66512686, 24733056, 2589895311, 2412638843, 3335361913, 830903978, 2159853905, 3252044215, 3979098146, 3259562139, 2616395181, 2262335217, 3893678386, 1119689087, 49662106, 2604976692, 3104842128, 591432896, 2920276550, 4283275384, 886126074, 1699638022, 1211132273, 2994848802, 3431763664, 3743304643, 1743121259, 1259014106, 3762137341, 3671979499, 2921723106, 2603349153, 1123612798, 3044707769, 3627980126, 2387810885, 3765233584, 2667185982, 3387896959, 3389146180, 759626192, 2970753347, 2624895367, 1323356570, 3912412792, 3730159740, 1850604665, 2530817507, 2330263274, 542843181, 783543768, 1754931073, 3401982301, 807582271, 16052305, 1722366308, 3386952517, 3895706500, 4129711633, 595925607, 2249492156, 101013764, 1697433744, 2812225880, 3668427550, 1330160512, 3702015631, 2842352029, 488481236, 4115125792, 3831093607, 4225259833, 2613345325, 2291820630, 4189148895, 444119893, 2179127584, 4024386402, 1528488865, 2750425904, 3695809707, 3063555749, 4279085228, 2254418136, 4117203865, 815563395, 1446696405, 1504647152, 748680691, 3645435086, 499955125, 2674750097, 93379365, 2247105618, 3984625961, 986622593, 716829732, 2473461041, 1114948394, 1076917711, 3097967358, 988590137, 3010790245, 240731431, 2164434723, 3881599295, 2862840338, 4279817959, 1925020093, 2191107008, 914258587, 3669212353, 2520920520, 2079545235, 582188844, 346120152, 3184633232, 3353888611, 394625592, 3890411236, 172050742, 1989955914, 2647285978, 3288034033, 3550084791, 3547385369, 2505798039, 2843998720, 563917230, 1153981379, 3096694044, 2780560134, 1263350731, 968267719, 3951334205, 169095454, 1240476617, 444283336, 764019256, 389576043, 1836779546, 752821322, 1126110028, 713971479, 3534847468, 194314000, 683165381, 2732422766, 3183954124, 3864200834, 2621986336, 3795983692, 1529686388, 2487601000, 1711420163, 1566176999, 1359040129, 2067465155, 1461729153, 3093358493, 3186582209, 632389802, 1195883065, 3514422422, 211795326, 870805576, 1391256376, 1191874417, 3359206561, 2364361478, 901432403, 1940147340, 1045329360, 3140146006, 1661491656, 1185711148, 3624253240, 3501428733, 3622708706, 40484727, 3348116889, 2487552500, 4210164322, 2249091920, 1619421611, 1731736081, 426056499, 1591270903, 2597498947, 4081408549, 3797663287, 1041039230, 3600535396, 4550629, 1394150954, 3030651107, 1031090806, 3274483012, 3683380709, 83922666, 2425469145, 1755624591, 409998106, 2144665595, 2980165974, 73465167, 2303798150, 3767653929, 3135373609, 3445204649, 2369717170, 2087342446, 3492983019, 3961933546, 1030699621, 2636310241, 174541054, 271021193, 2360437190, 425954896, 92882486, 1833674440, 3991235350, 2893495002, 2539985818, 3468070898, 4209531222, 1925888400, 3300100939, 3686894476, 3293440681, 391287521, 2842375627, 3952215622, 423880194, 2673835478, 148976674, 3773758668, 2067482288, 1883706511, 3844943561, 2306795071, 1867670956, 1854954723, 2911488642, 3737677576, 1647995695, 616826769, 745797093, 3937726990, 2172916496, 4250263727, 742994023, 3470802990, 354803681, 587022804, 1647881441, 50232099, 3453193200, 2628535047, 359139617, 1853326747, 3323757818, 468387681, 2990412705, 2404729437, 2780566445, 834788458, 2777314366, 676991284, 351545479, 2136723498, 1201909971, 201588508, 1233528184, 2815597135, 3180025368, 1063203580, 595314744, 22873402, 3368646960, 4153592600, 1975738420, 1394177576, 426543919, 183530114, 1935282914, 1882535771, 861482297, 1114738297, 464906562, 434377147, 3230333604, 3381538414, 2567181168, 969935752, 1872256728, 2623183805, 2027497016, 3841876981, 276182684, 2465935645, 2302905570, 3461134956, 3856374091, 2714970507, 3173354471, 779476968, 4114836869, 567498311, 260142177, 3771974584, 1929713490, 3125152075, 1594583079, 3686708108, 4037083805, 1373248501, 3365403464, 4061958294, 2970083971, 2808614097, 1389445106, 1965574599, 4012234832, 1365689605, 3640709722], "pos": 5}, "exits": {}, "cancels": {}, "failures": {}, "shutdown": false, "trials_closed": {}, "trial_progress": {"9c6e3038-30cc-4f45-ad2b-0d52b0c669e4": 0}, "trials_created": {"9c6e3038-30cc-4f45-ad2b-0d52b0c669e4": true}, "trials_requested": 1, "search_method_state": {"created_trials": 1, "pending_trials": 1, "search_method_type": "single"}, "completed_operations": {}}, "trial_searcher_state": {"9c6e3038-30cc-4f45-ad2b-0d52b0c669e4": {"Op": {"Length": 1000, "RequestID": "9c6e3038-30cc-4f45-ad2b-0d52b0c669e4"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.25, "dropout2": 0.5, "n_filters1": 32, "n_filters2": 64, "learning_rate": 1}, "checkpoint": null, "request_id": "9c6e3038-30cc-4f45-ad2b-0d52b0c669e4", "trial_seed": 179934364, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}}}`),
		},
		{
			name: searcher.AdaptiveASHASearch,
			//nolint:lll
			v4Snapshot: []byte(`{"searcher_state": {"rand": {"key": [166969005, 4029900907, 884994835, 4094492229, 2749571723, 2186047539, 2473598318, 1565000593, 1446299337, 4064410631, 3258707578, 3331086854, 47872772, 613283277, 3278852539, 1038458760, 3895481911, 3829976488, 463234087, 423925809, 1128175492, 2474517250, 1659829299, 3234667107, 280586429, 956622269, 4080152602, 4172169883, 1655937812, 3850188910, 2697319559, 2751668897, 3850145250, 1019730083, 3919988911, 489577251, 3079415926, 1849073358, 512136141, 3993851713, 1228494412, 4203835454, 82546373, 2720405494, 2641108315, 1318699721, 2726871963, 3833514624, 2874970196, 2816570211, 1728053533, 2104444730, 8854313, 615981676, 1107137560, 1673004444, 2284566216, 1937717691, 2442234851, 1315792375, 3847469398, 4188790364, 3989790410, 4192139572, 195480515, 2572462537, 289600463, 2875868460, 2482330846, 1652545366, 2765334605, 3453157347, 3777982981, 2114352442, 2954196247, 1477239278, 2527206474, 3620191039, 3471388428, 3601205303, 726431293, 1245251482, 4052982007, 3868370391, 207327032, 2366419981, 3567445292, 861796050, 1984823582, 475254613, 2589883043, 2552779114, 606759167, 1144177593, 3792773144, 929820098, 1590581899, 1824151075, 3512581427, 2568142218, 843842335, 94077928, 3093468379, 4015368408, 1093290389, 1953996377, 4035508939, 228713935, 3772959653, 1053620782, 836948946, 4127971814, 1525511330, 1617224832, 1788846088, 3562752086, 1343395525, 3137433079, 641519424, 4059413144, 2700715239, 890298621, 3686626533, 4173205464, 3256437474, 2951640166, 1309873716, 1968665141, 1505881284, 3182171920, 3765821800, 987459773, 1760344427, 3417331240, 2509686331, 1777708632, 3742280374, 3594389562, 3345682850, 4207480862, 2288228283, 4036877405, 3517069278, 647056236, 1076359329, 1660449485, 3990868126, 1081408282, 4291887871, 2653919935, 674917736, 748338112, 2747014376, 3591397079, 2184913734, 3293236975, 1438269797, 1213786215, 2946818622, 376999944, 174283664, 2099277665, 3480916522, 187559094, 1570056494, 1040742179, 308228229, 2372790432, 998003799, 1174926890, 1307877408, 3394691115, 2959399262, 3621944813, 4177758606, 2258431464, 2028328663, 3539215989, 3202627002, 1736789695, 2432052786, 3395768338, 1105102848, 4107375505, 1696801020, 4179672507, 346299809, 2136177610, 1263797184, 2536905548, 999121754, 1132242546, 2128530324, 1414419066, 3091458316, 3809667117, 2665054294, 3893230491, 4093064430, 2497849137, 3973351414, 1350462911, 536813075, 3618294153, 2629336370, 3770646844, 3948230649, 779030138, 2102428441, 2644021387, 3938017794, 41039727, 3353338217, 1381036566, 491916952, 2784909760, 410694647, 96644888, 2876184142, 3722129683, 902114372, 2022400391, 3309619868, 520985778, 147811111, 3861907525, 181787449, 3482754569, 2580965164, 3905815055, 3882740816, 3848795347, 1254748797, 1590651462, 1963055882, 2340083196, 2705969127, 3542399405, 700303164, 1837130856, 802882314, 4122970695, 233698320, 421724001, 569222741, 2757410671, 3226570823, 2349965357, 3492136224, 850492287, 502676578, 2342305956, 1820782345, 4257660313, 492999821, 1296991705, 3364526458, 1487989540, 1840583596, 689952078, 887545143, 2377169379, 1047068433, 1587691772, 4166383900, 2559488330, 2784195604, 1179007043, 1175237520, 641633241, 2242433712, 1438594233, 164992814, 2867806263, 1568113978, 4117681834, 338441084, 674645165, 3622000926, 22890426, 2668208952, 1892449148, 1882701352, 3175076954, 1790178144, 3686873458, 3627604460, 984167026, 2284840633, 186373410, 349899572, 29061710, 884847397, 1899502466, 2307384715, 196307496, 1419146018, 629449625, 2851345881, 1416297200, 3919931085, 423512537, 3312848253, 254834643, 2460089457, 4132294483, 3608816112, 384935200, 1670681380, 1842350699, 2941861519, 1048964460, 2812751998, 17063354, 1078880106, 3740863273, 3780186113, 3368724146, 1137673050, 3218238653, 1608306685, 3109020866, 3016821182, 2194747754, 599829011, 2895054283, 2499398308, 413376725, 304610785, 2204966889, 2287817647, 2340018604, 60014885, 1327138641, 3412145515, 2063258523, 517027086, 3278652781, 1813376432, 3849823252, 2839799277, 2370157355, 1180192670, 3307566699, 3072366339, 1465184022, 2990386219, 3893203471, 3054207508, 1618697877, 2057638333, 58143252, 3743961421, 2904706590, 2842738207, 4070273814, 1246321569, 3144752662, 3321824428, 1718704785, 831628108, 2485145671, 2348833665, 2919453135, 3998528796, 688448945, 25131609, 3591681966, 1747487363, 1957137361, 3106448762, 2751492650, 2584845137, 2460309851, 151451864, 3483192505, 2613282738, 1698467601, 3517159690, 3741010506, 2766893079, 1767510799, 2026405853, 1716508964, 1920092287, 260412426, 3726939588, 4290264257, 4277786230, 793382967, 3750641371, 3654118977, 526047940, 2605940928, 3645513023, 1325081163, 259134912, 1209370169, 713076939, 2697849341, 81670016, 1964723940, 3454189160, 552086904, 1694590335, 2254767470, 846481464, 2528181565, 489300895, 2424338657, 2331264714, 3484431684, 1100311573, 710407877, 531155601, 2935184155, 1183489114, 3756661998, 4185788325, 192838091, 842932449, 851031679, 3619784783, 561647289, 1747088000, 976583025, 2961361145, 1053804540, 1659415341, 2805305839, 435708439, 173900482, 2969182605, 3088294320, 3189957123, 2648670633, 44035569, 2036459131, 1217715486, 4067957016, 35408809, 951553696, 3108702824, 513563089, 2813896731, 2227458277, 3721272090, 1472918092, 1859897148, 4016836916, 1547926771, 1831850245, 2685335585, 585336686, 3064768397, 901696857, 1578356006, 3004841992, 1219842961, 255344399, 2797224156, 1962807338, 1978968271, 4170701710, 1648703015, 1174943281, 1470542037, 3867278365, 2551274157, 4040405403, 3295021002, 2666232296, 497642278, 3561842268, 415734886, 1496647163, 285696074, 3945388440, 505157107, 4184851356, 2356228003, 2351801559, 1357718212, 2940760964, 773134436, 2479629369, 3626623259, 1837331452, 2073434522, 1056413538, 2270021580, 485522765, 1272530420, 790850597, 1159852499, 1674323288, 219595082, 108445381, 540175514, 3074056586, 666129001, 2852542408, 1523496905, 1966069489, 1031180285, 3379388051, 3434287196, 594056138, 2695878137, 3854952388, 3171730827, 2077626901, 1808078980, 2609083429, 2519376099, 3511039892, 2314795326, 4294560724, 3191521871, 120296895, 1076326907, 1613081179, 2447733255, 3704233877, 953074008, 4186284830, 2457164042, 1171125825, 4198521444, 3634226638, 3561018959, 1254468200, 3534293128, 740479376, 4141185022, 1265149781, 628387716, 4222856060, 3689215540, 2693520431, 2573957990, 3363330117, 4038128731, 1600008034, 1640580177, 1355943399, 435006144, 1040762268, 3918977383, 2162469266, 2361832008, 832652653, 733503198, 2097747365, 3176718753, 2116005577, 2981749624, 1987156457, 257829127, 4173504777, 3133981980, 4137870296, 2145949424, 2073045218, 3762788996, 3382218965, 1014966825, 1672627567, 2195080363, 1405550851, 587351581, 3373218917, 839478114, 633472865, 3495622292, 1116328543, 3883278798, 2438099758, 2364745686, 897582194, 1519248678, 3361122046, 2850030880, 1731973587, 3322015264, 894914297, 2937968306, 3515296058, 2109861366, 4197183347, 3250480502, 2125698580, 1133017848, 3532648389, 2763816264, 3064089507, 902440642, 3091321296, 465092808, 3461834121, 501337568, 2689461588, 234021089, 762081614, 2822824278, 1036341483, 1809448496, 2172146526, 1621873087, 1487568764, 355236896, 3922066648, 193549623, 2603731995, 757518295, 184282471, 2464073618, 4007993484, 3172052375, 4070470304, 478537186, 2048866906, 3972461837, 2458090057], "pos": 218}, "exits": {}, "cancels": {}, "failures": {}, "shutdown": false, "trials_closed": {"0e127e4b-ecaf-433f-beae-e51608e716a8": true, "122faf30-3bdc-47b1-bdf6-d0e8c63139d8": true, "16daa73e-d3db-4237-af4c-d616574b381c": true, "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8": true, "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813": true, "51eff583-6a8b-4249-90e7-d692be71f963": true, "96822231-515c-463d-9c20-c31da44d1327": true, "96cf7d4e-a644-4e41-8c1f-40d5277635ca": true, "9c63f994-ae52-4226-804d-ee3acfdc8d06": true, "c40e0a00-e5f1-4418-8559-1569051f5782": true, "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284": true, "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57": true, "f9b9454c-fe96-467e-8969-51dc876a63bc": true, "fa9b3ec8-b714-476f-a76a-546137831ccb": true}, "trial_progress": {"075c7c6e-13a3-4be3-8fdd-41bc5f7a705c": 400, "0e127e4b-ecaf-433f-beae-e51608e716a8": 58, "122faf30-3bdc-47b1-bdf6-d0e8c63139d8": 58, "16daa73e-d3db-4237-af4c-d616574b381c": 234, "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8": 58, "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813": 234, "51eff583-6a8b-4249-90e7-d692be71f963": 58, "5cb85211-0cfd-4575-a8f6-8e51bcd475e2": 234, "96822231-515c-463d-9c20-c31da44d1327": 234, "96cf7d4e-a644-4e41-8c1f-40d5277635ca": 234, "9c63f994-ae52-4226-804d-ee3acfdc8d06": 234, "c40e0a00-e5f1-4418-8559-1569051f5782": 234, "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284": 58, "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57": 58, "f9b9454c-fe96-467e-8969-51dc876a63bc": 58, "fa9b3ec8-b714-476f-a76a-546137831ccb": 58}, "trials_created": {"075c7c6e-13a3-4be3-8fdd-41bc5f7a705c": true, "0e127e4b-ecaf-433f-beae-e51608e716a8": true, "122faf30-3bdc-47b1-bdf6-d0e8c63139d8": true, "16daa73e-d3db-4237-af4c-d616574b381c": true, "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8": true, "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813": true, "51eff583-6a8b-4249-90e7-d692be71f963": true, "5cb85211-0cfd-4575-a8f6-8e51bcd475e2": true, "96822231-515c-463d-9c20-c31da44d1327": true, "96cf7d4e-a644-4e41-8c1f-40d5277635ca": true, "9c63f994-ae52-4226-804d-ee3acfdc8d06": true, "c40e0a00-e5f1-4418-8559-1569051f5782": true, "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284": true, "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57": true, "f9b9454c-fe96-467e-8969-51dc876a63bc": true, "fa9b3ec8-b714-476f-a76a-546137831ccb": true}, "trials_requested": 16, "search_method_state": {"trial_table": {"075c7c6e-13a3-4be3-8fdd-41bc5f7a705c": 1, "0e127e4b-ecaf-433f-beae-e51608e716a8": 0, "122faf30-3bdc-47b1-bdf6-d0e8c63139d8": 0, "16daa73e-d3db-4237-af4c-d616574b381c": 1, "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8": 0, "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813": 1, "51eff583-6a8b-4249-90e7-d692be71f963": 0, "5cb85211-0cfd-4575-a8f6-8e51bcd475e2": 0, "96822231-515c-463d-9c20-c31da44d1327": 0, "96cf7d4e-a644-4e41-8c1f-40d5277635ca": 0, "9c63f994-ae52-4226-804d-ee3acfdc8d06": 1, "c40e0a00-e5f1-4418-8559-1569051f5782": 0, "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284": 0, "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57": 0, "f9b9454c-fe96-467e-8969-51dc876a63bc": 0, "fa9b3ec8-b714-476f-a76a-546137831ccb": 0}, "sub_search_states": [{"rungs": [{"metrics": [{"metric": 0.2479473538696766, "promoted": true, "request_id": "5cb85211-0cfd-4575-a8f6-8e51bcd475e2"}, {"metric": 0.26724784161634507, "promoted": true, "request_id": "96822231-515c-463d-9c20-c31da44d1327"}, {"metric": 0.2720372611597465, "promoted": true, "request_id": "c40e0a00-e5f1-4418-8559-1569051f5782"}, {"metric": 0.29854639325362103, "promoted": true, "request_id": "96cf7d4e-a644-4e41-8c1f-40d5277635ca"}, {"metric": 0.32960422889916763, "promoted": false, "request_id": "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8"}, {"metric": 0.3353373265237945, "promoted": false, "request_id": "0e127e4b-ecaf-433f-beae-e51608e716a8"}, {"metric": 0.38320851895459895, "promoted": false, "request_id": "51eff583-6a8b-4249-90e7-d692be71f963"}, {"metric": 0.38628050604253816, "promoted": false, "request_id": "fa9b3ec8-b714-476f-a76a-546137831ccb"}, {"metric": 0.4330786218404011, "promoted": false, "request_id": "f9b9454c-fe96-467e-8969-51dc876a63bc"}, {"metric": 0.5617451486504002, "promoted": false, "request_id": "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57"}, {"metric": 0.69477715423912, "promoted": false, "request_id": "122faf30-3bdc-47b1-bdf6-d0e8c63139d8"}, {"metric": 0.9386741898621723, "promoted": false, "request_id": "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284"}], "start_trials": 0, "units_needed": 58, "promote_trials": 0, "outstanding_trials": 0}, {"metrics": [{"metric": 0.10118368651219614, "promoted": true, "request_id": "5cb85211-0cfd-4575-a8f6-8e51bcd475e2"}, {"metric": 0.10304045747405001, "promoted": false, "request_id": "96cf7d4e-a644-4e41-8c1f-40d5277635ca"}, {"metric": 0.10440079899724264, "promoted": false, "request_id": "96822231-515c-463d-9c20-c31da44d1327"}, {"metric": 0.11539868130141002, "promoted": false, "request_id": "c40e0a00-e5f1-4418-8559-1569051f5782"}], "start_trials": 0, "units_needed": 292, "promote_trials": 0, "outstanding_trials": 0}, {"metrics": null, "start_trials": 0, "units_needed": 1229, "promote_trials": 0, "outstanding_trials": 1}], "trial_rungs": {"0e127e4b-ecaf-433f-beae-e51608e716a8": 0, "122faf30-3bdc-47b1-bdf6-d0e8c63139d8": 0, "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8": 0, "51eff583-6a8b-4249-90e7-d692be71f963": 0, "5cb85211-0cfd-4575-a8f6-8e51bcd475e2": 2, "96822231-515c-463d-9c20-c31da44d1327": 1, "96cf7d4e-a644-4e41-8c1f-40d5277635ca": 1, "c40e0a00-e5f1-4418-8559-1569051f5782": 1, "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284": 0, "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57": 0, "f9b9454c-fe96-467e-8969-51dc876a63bc": 0, "fa9b3ec8-b714-476f-a76a-546137831ccb": 0}, "closed_trials": {"0e127e4b-ecaf-433f-beae-e51608e716a8": true, "122faf30-3bdc-47b1-bdf6-d0e8c63139d8": true, "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8": true, "51eff583-6a8b-4249-90e7-d692be71f963": true, "96822231-515c-463d-9c20-c31da44d1327": true, "96cf7d4e-a644-4e41-8c1f-40d5277635ca": true, "c40e0a00-e5f1-4418-8559-1569051f5782": true, "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284": true, "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57": true, "f9b9454c-fe96-467e-8969-51dc876a63bc": true, "fa9b3ec8-b714-476f-a76a-546137831ccb": true}, "invalid_trials": 0, "pending_trials": 1, "trials_completed": 11, "early_exit_trials": {}, "search_method_type": "asha"}, {"rungs": [{"metrics": [{"metric": 0.12871742589179735, "promoted": true, "request_id": "075c7c6e-13a3-4be3-8fdd-41bc5f7a705c"}, {"metric": 0.14069098103524535, "promoted": false, "request_id": "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813"}, {"metric": 0.15523768908338278, "promoted": false, "request_id": "9c63f994-ae52-4226-804d-ee3acfdc8d06"}, {"metric": 0.1737883221328401, "promoted": false, "request_id": "16daa73e-d3db-4237-af4c-d616574b381c"}], "start_trials": 0, "units_needed": 234, "promote_trials": 0, "outstanding_trials": 0}, {"metrics": null, "start_trials": 0, "units_needed": 1171, "promote_trials": 0, "outstanding_trials": 1}], "trial_rungs": {"075c7c6e-13a3-4be3-8fdd-41bc5f7a705c": 1, "16daa73e-d3db-4237-af4c-d616574b381c": 0, "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813": 0, "9c63f994-ae52-4226-804d-ee3acfdc8d06": 0}, "closed_trials": {"16daa73e-d3db-4237-af4c-d616574b381c": true, "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813": true, "9c63f994-ae52-4226-804d-ee3acfdc8d06": true}, "invalid_trials": 0, "pending_trials": 1, "trials_completed": 3, "early_exit_trials": {}, "search_method_type": "asha"}], "search_method_type": "adaptive_asha", "sub_search_units_completed": [0, 0]}, "completed_operations": {"{ValidateAfter 0e127e4b-ecaf-433f-beae-e51608e716a8, 58}": {"Length": 58, "RequestID": "0e127e4b-ecaf-433f-beae-e51608e716a8"}, "{ValidateAfter 122faf30-3bdc-47b1-bdf6-d0e8c63139d8, 58}": {"Length": 58, "RequestID": "122faf30-3bdc-47b1-bdf6-d0e8c63139d8"}, "{ValidateAfter 2f81a7e3-00b7-47fb-a7c7-ea80d38004a8, 58}": {"Length": 58, "RequestID": "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8"}, "{ValidateAfter 51eff583-6a8b-4249-90e7-d692be71f963, 58}": {"Length": 58, "RequestID": "51eff583-6a8b-4249-90e7-d692be71f963"}, "{ValidateAfter 5cb85211-0cfd-4575-a8f6-8e51bcd475e2, 58}": {"Length": 58, "RequestID": "5cb85211-0cfd-4575-a8f6-8e51bcd475e2"}, "{ValidateAfter 96822231-515c-463d-9c20-c31da44d1327, 58}": {"Length": 58, "RequestID": "96822231-515c-463d-9c20-c31da44d1327"}, "{ValidateAfter 96cf7d4e-a644-4e41-8c1f-40d5277635ca, 58}": {"Length": 58, "RequestID": "96cf7d4e-a644-4e41-8c1f-40d5277635ca"}, "{ValidateAfter c40e0a00-e5f1-4418-8559-1569051f5782, 58}": {"Length": 58, "RequestID": "c40e0a00-e5f1-4418-8559-1569051f5782"}, "{ValidateAfter f3afd8e2-6cd9-4823-98f9-9e1ac50dc284, 58}": {"Length": 58, "RequestID": "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284"}, "{ValidateAfter f3fa520d-6df4-420f-92ba-e5b2d1ae2f57, 58}": {"Length": 58, "RequestID": "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57"}, "{ValidateAfter f9b9454c-fe96-467e-8969-51dc876a63bc, 58}": {"Length": 58, "RequestID": "f9b9454c-fe96-467e-8969-51dc876a63bc"}, "{ValidateAfter fa9b3ec8-b714-476f-a76a-546137831ccb, 58}": {"Length": 58, "RequestID": "fa9b3ec8-b714-476f-a76a-546137831ccb"}, "{ValidateAfter 075c7c6e-13a3-4be3-8fdd-41bc5f7a705c, 234}": {"Length": 234, "RequestID": "075c7c6e-13a3-4be3-8fdd-41bc5f7a705c"}, "{ValidateAfter 16daa73e-d3db-4237-af4c-d616574b381c, 234}": {"Length": 234, "RequestID": "16daa73e-d3db-4237-af4c-d616574b381c"}, "{ValidateAfter 40a7e69c-ecd2-4bc1-b7a1-8f32856f5813, 234}": {"Length": 234, "RequestID": "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813"}, "{ValidateAfter 5cb85211-0cfd-4575-a8f6-8e51bcd475e2, 234}": {"Length": 234, "RequestID": "5cb85211-0cfd-4575-a8f6-8e51bcd475e2"}, "{ValidateAfter 96822231-515c-463d-9c20-c31da44d1327, 234}": {"Length": 234, "RequestID": "96822231-515c-463d-9c20-c31da44d1327"}, "{ValidateAfter 96cf7d4e-a644-4e41-8c1f-40d5277635ca, 234}": {"Length": 234, "RequestID": "96cf7d4e-a644-4e41-8c1f-40d5277635ca"}, "{ValidateAfter 9c63f994-ae52-4226-804d-ee3acfdc8d06, 234}": {"Length": 234, "RequestID": "9c63f994-ae52-4226-804d-ee3acfdc8d06"}, "{ValidateAfter c40e0a00-e5f1-4418-8559-1569051f5782, 234}": {"Length": 234, "RequestID": "c40e0a00-e5f1-4418-8559-1569051f5782"}}}, "trial_searcher_state": {"075c7c6e-13a3-4be3-8fdd-41bc5f7a705c": {"Op": {"Length": 937, "RequestID": "075c7c6e-13a3-4be3-8fdd-41bc5f7a705c"}, "Closed": false, "Create": {"hparams": {"dropout1": 0.7054536972603364, "dropout2": 0.5538228466223742, "n_filters1": 41, "n_filters2": 71, "learning_rate": 0.5450394716152983}, "checkpoint": null, "request_id": "075c7c6e-13a3-4be3-8fdd-41bc5f7a705c", "trial_seed": 1080322429, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "0e127e4b-ecaf-433f-beae-e51608e716a8": {"Op": {"Length": 58, "RequestID": "0e127e4b-ecaf-433f-beae-e51608e716a8"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.7688626435011079, "dropout2": 0.5788003725170278, "n_filters1": 22, "n_filters2": 72, "learning_rate": 0.7455875104036884}, "checkpoint": null, "request_id": "0e127e4b-ecaf-433f-beae-e51608e716a8", "trial_seed": 228468652, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "122faf30-3bdc-47b1-bdf6-d0e8c63139d8": {"Op": {"Length": 58, "RequestID": "122faf30-3bdc-47b1-bdf6-d0e8c63139d8"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.7177918034746482, "dropout2": 0.5249487755161167, "n_filters1": 20, "n_filters2": 12, "learning_rate": 0.15162271723538315}, "checkpoint": null, "request_id": "122faf30-3bdc-47b1-bdf6-d0e8c63139d8", "trial_seed": 899468238, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "16daa73e-d3db-4237-af4c-d616574b381c": {"Op": {"Length": 234, "RequestID": "16daa73e-d3db-4237-af4c-d616574b381c"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.5680433589452616, "dropout2": 0.5428772832037275, "n_filters1": 22, "n_filters2": 43, "learning_rate": 0.3169520119590656}, "checkpoint": null, "request_id": "16daa73e-d3db-4237-af4c-d616574b381c", "trial_seed": 766360004, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8": {"Op": {"Length": 58, "RequestID": "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.7639133229599417, "dropout2": 0.6151498061766965, "n_filters1": 46, "n_filters2": 64, "learning_rate": 0.9148615093720639}, "checkpoint": null, "request_id": "2f81a7e3-00b7-47fb-a7c7-ea80d38004a8", "trial_seed": 642213467, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813": {"Op": {"Length": 234, "RequestID": "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.4094902904683008, "dropout2": 0.3719917374938418, "n_filters1": 34, "n_filters2": 15, "learning_rate": 0.39265915949868574}, "checkpoint": null, "request_id": "40a7e69c-ecd2-4bc1-b7a1-8f32856f5813", "trial_seed": 296212117, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "51eff583-6a8b-4249-90e7-d692be71f963": {"Op": {"Length": 58, "RequestID": "51eff583-6a8b-4249-90e7-d692be71f963"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.658808250498027, "dropout2": 0.30671127274278814, "n_filters1": 57, "n_filters2": 10, "learning_rate": 0.9500546459301605}, "checkpoint": null, "request_id": "51eff583-6a8b-4249-90e7-d692be71f963", "trial_seed": 1250863532, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "5cb85211-0cfd-4575-a8f6-8e51bcd475e2": {"Op": {"Length": 937, "RequestID": "5cb85211-0cfd-4575-a8f6-8e51bcd475e2"}, "Closed": false, "Create": {"hparams": {"dropout1": 0.4432546590326073, "dropout2": 0.35617335202650324, "n_filters1": 44, "n_filters2": 47, "learning_rate": 0.46342018472648383}, "checkpoint": null, "request_id": "5cb85211-0cfd-4575-a8f6-8e51bcd475e2", "trial_seed": 202126030, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "96822231-515c-463d-9c20-c31da44d1327": {"Op": {"Length": 234, "RequestID": "96822231-515c-463d-9c20-c31da44d1327"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.5323975624185528, "dropout2": 0.4070191393920004, "n_filters1": 60, "n_filters2": 32, "learning_rate": 0.9068399258163841}, "checkpoint": null, "request_id": "96822231-515c-463d-9c20-c31da44d1327", "trial_seed": 2143986240, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "96cf7d4e-a644-4e41-8c1f-40d5277635ca": {"Op": {"Length": 234, "RequestID": "96cf7d4e-a644-4e41-8c1f-40d5277635ca"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.3959412170836506, "dropout2": 0.21973262558351345, "n_filters1": 13, "n_filters2": 53, "learning_rate": 0.622412429215037}, "checkpoint": null, "request_id": "96cf7d4e-a644-4e41-8c1f-40d5277635ca", "trial_seed": 1030784648, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "9c63f994-ae52-4226-804d-ee3acfdc8d06": {"Op": {"Length": 234, "RequestID": "9c63f994-ae52-4226-804d-ee3acfdc8d06"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.2558718765252274, "dropout2": 0.609189901943594, "n_filters1": 20, "n_filters2": 15, "learning_rate": 0.5180122768249095}, "checkpoint": null, "request_id": "9c63f994-ae52-4226-804d-ee3acfdc8d06", "trial_seed": 2060146634, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "c40e0a00-e5f1-4418-8559-1569051f5782": {"Op": {"Length": 234, "RequestID": "c40e0a00-e5f1-4418-8559-1569051f5782"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.525573766957339, "dropout2": 0.5917552383487863, "n_filters1": 41, "n_filters2": 25, "learning_rate": 0.9002202195720139}, "checkpoint": null, "request_id": "c40e0a00-e5f1-4418-8559-1569051f5782", "trial_seed": 1390657817, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284": {"Op": {"Length": 58, "RequestID": "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.7107611168016962, "dropout2": 0.788882009982349, "n_filters1": 13, "n_filters2": 45, "learning_rate": 0.18993561433577136}, "checkpoint": null, "request_id": "f3afd8e2-6cd9-4823-98f9-9e1ac50dc284", "trial_seed": 59300879, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57": {"Op": {"Length": 58, "RequestID": "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.7015604222346574, "dropout2": 0.7668399213339976, "n_filters1": 26, "n_filters2": 72, "learning_rate": 0.26324586958507995}, "checkpoint": null, "request_id": "f3fa520d-6df4-420f-92ba-e5b2d1ae2f57", "trial_seed": 1522643948, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "f9b9454c-fe96-467e-8969-51dc876a63bc": {"Op": {"Length": 58, "RequestID": "f9b9454c-fe96-467e-8969-51dc876a63bc"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.38517697585075006, "dropout2": 0.5383238298282291, "n_filters1": 41, "n_filters2": 11, "learning_rate": 0.27234749246005757}, "checkpoint": null, "request_id": "f9b9454c-fe96-467e-8969-51dc876a63bc", "trial_seed": 119333804, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}, "fa9b3ec8-b714-476f-a76a-546137831ccb": {"Op": {"Length": 58, "RequestID": "fa9b3ec8-b714-476f-a76a-546137831ccb"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.5720740076370983, "dropout2": 0.7944259274109229, "n_filters1": 51, "n_filters2": 66, "learning_rate": 0.8465238384627785}, "checkpoint": null, "request_id": "fa9b3ec8-b714-476f-a76a-546137831ccb", "trial_seed": 1643930799, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": true}}}`),
			//nolint:lll
			v5Snapshot: []byte(``),
		},
		{
			name: searcher.GridSearch,
			//nolint:lll
			v4Snapshot: []byte(`{"searcher_state": {"rand": {"key": [849160749, 3451304642, 1852252544, 626820914, 892156933, 2466628291, 113127475, 990860695, 2110865427, 4285029443, 2072718194, 4196859172, 1219773630, 3015513671, 3348605621, 3313369146, 4251638521, 958452481, 3337582623, 2629048039, 291491872, 12688851, 4092493193, 2946216047, 1113991058, 2842523825, 2293527979, 3252779682, 333353506, 2110492849, 2871825779, 3973465544, 1285740488, 348502579, 3185945811, 3462092407, 1821080085, 3132395737, 1614796532, 1415925740, 2525304201, 1477480611, 1134565274, 2523238676, 2449488654, 2186832353, 1568855525, 2851373741, 2951000716, 4157536528, 4163815071, 2984126523, 1331146604, 1515799264, 2058188982, 447833166, 1733472196, 2846722192, 1084842801, 1378475787, 3116498785, 1657779117, 2596204254, 2872322477, 162696014, 2121443196, 3544941206, 3411992735, 1016273, 3065923864, 1232712668, 3821799428, 1717822116, 3122156319, 795524894, 3717097397, 1266511585, 3756738072, 3383493656, 3648048083, 577965429, 1880831802, 567765171, 848684488, 2003873003, 170615382, 1900024466, 2952404694, 2269286093, 2761049759, 3713691897, 714511656, 3280714732, 2018409996, 3709413643, 2895857960, 4173382223, 400785963, 2649300905, 150847037, 3773279619, 1913873399, 2489329825, 3117812262, 2849095057, 3298029578, 2571221617, 1883435569, 4119511616, 727199340, 930294748, 919779613, 3105533284, 195738249, 2541468101, 3115139804, 1852754470, 4188241928, 2610922690, 2414611272, 3017564688, 1393038972, 963518185, 1443267630, 3641938280, 3072846023, 3707630902, 3626581740, 1556876320, 2559992542, 325680089, 3689062626, 2960048627, 1691108056, 2073005622, 1150473862, 1918376063, 97644499, 3304036571, 3348726678, 1280542180, 3335855559, 3367044307, 1199396173, 3826303540, 2201840406, 614051789, 3392593539, 121487301, 227318748, 1219669056, 1787076796, 2458423096, 2710529001, 4283266232, 1453814776, 2486319562, 3073561724, 1823484214, 3451915250, 3859153525, 1366541104, 2873311482, 424067667, 201381225, 956235871, 896254601, 1538061000, 459280314, 188790152, 1966415038, 2708249269, 4188422729, 1862095701, 3199767031, 2362093408, 3425822931, 4234368327, 1272647054, 529111416, 1884433069, 170739094, 3145562098, 2353017201, 1263133347, 3634200603, 374156789, 3211730530, 893196136, 3805324939, 402345898, 2657247670, 787619556, 2680398235, 3425958274, 903992295, 2884428002, 1461056403, 2193577002, 3541210557, 2121719047, 3839668441, 3389998076, 2826828485, 3632222846, 3608315867, 3515845832, 1852716107, 4009495748, 1723469670, 2356162679, 499374162, 2236090528, 171297914, 3100392201, 1383693539, 3434390578, 1628360314, 3618169319, 551086610, 3757688577, 3648148560, 1310048557, 4046843801, 3686533076, 213825722, 2698761296, 1522610083, 2441267026, 1219541955, 1597142018, 2786847692, 2892166166, 2387731676, 2135740650, 983975537, 1332550588, 1445563237, 2639548156, 3805783299, 589768890, 256149904, 3066919433, 871880384, 2103392337, 3967475476, 4262269127, 2424123185, 986571430, 330689701, 1443358279, 561308190, 3549581923, 535087487, 2291574150, 1264993595, 2306053270, 4252185293, 459641035, 853516923, 1167641692, 2460978589, 2305058326, 1207141852, 3333302214, 4149345625, 95546235, 3415613501, 2505911699, 2844788058, 161393673, 139267861, 2273469294, 1092051985, 719807, 2350113255, 3052376351, 3697923049, 3943875594, 1371654029, 2932257491, 2121503007, 4180460356, 1312082771, 4143592191, 2109970027, 1238394063, 3567746344, 1977781949, 3946897304, 4020837610, 365465563, 3218675029, 971517425, 1725082731, 1082160887, 1435998256, 1730176468, 4009457268, 751156879, 1527395560, 783938625, 130211271, 2519980312, 3328879441, 3901860734, 2407128124, 2090189557, 2813419674, 2860173572, 869904030, 767353860, 3741447691, 4108000468, 2693187195, 4020962999, 2736234988, 3851397895, 1200526021, 1051933277, 2663786168, 2151368056, 1277702764, 3297412486, 366488201, 2665424164, 3799714621, 4121036060, 4144647543, 2116097555, 1861109688, 1128784598, 1150263115, 208963073, 1461460820, 1237780908, 3085727860, 3322895482, 2600172964, 4183138601, 3229256944, 846902209, 74915345, 243041549, 3463152734, 1446395567, 3636970423, 2517870169, 1745768786, 3250171866, 2976951489, 2779305069, 3252079408, 1523736895, 3844926782, 3484222913, 3523473566, 2003240577, 2984016481, 2083257756, 1383740431, 3355281875, 2173680549, 3406077300, 4194461107, 2934981494, 3648620093, 1027846958, 4036255962, 875276667, 3638471230, 2145989283, 3416610860, 1183475151, 2201341214, 1271170701, 3464396938, 3972980707, 2744522349, 73898257, 2901617046, 3088426701, 2423840676, 1317740457, 4174952312, 724146060, 891283621, 3629760287, 1702820215, 1092536630, 2950808270, 1736029018, 453010121, 2747433715, 1621094745, 2708175304, 2462252368, 3078715830, 4154536541, 4118384153, 3643248594, 2514437750, 3021765377, 1076699341, 3029695610, 1778509650, 715109170, 3106603623, 199640926, 3060815431, 1550524799, 2509297132, 2527877805, 486382952, 820190589, 3739377168, 1354287335, 1958236321, 3254992832, 2043341345, 1125803874, 499648693, 746077673, 2406386360, 600481277, 1727748775, 1195695181, 3546370507, 1042437622, 214914493, 3956040576, 3565499503, 667083308, 3174139854, 1014753796, 3493720513, 1991068384, 3831799401, 1945622171, 599167908, 4155607931, 3482393041, 925817550, 1971158716, 2925903051, 500544356, 1189884753, 1124478943, 2411932099, 1831532493, 2941008576, 3239103019, 2748691736, 2700573796, 2933663152, 2275350578, 3226176216, 2245108109, 2790352356, 3741318149, 3382080111, 655189963, 3714291241, 339071098, 3864946620, 3806609488, 3889184379, 224176120, 1409789852, 3185776046, 4066674038, 4165019525, 2207510917, 2145394124, 3630991512, 1837493392, 3694614491, 4145402814, 2277346348, 2209288815, 3978314417, 2486223392, 3068047664, 3309810029, 515916934, 1745585783, 723450793, 512200815, 1387470828, 2015546747, 2809367703, 3890432924, 2488845769, 4082824314, 865413648, 3826049092, 2932018980, 2017767453, 1927682528, 1710404673, 3853493860, 1252866765, 1572966242, 221677808, 318282087, 1123390577, 2794952772, 2244454527, 84373997, 1443132592, 3215078685, 3868044234, 3897878877, 3798706608, 1942289622, 546704415, 1225151403, 3510979317, 1407271511, 3615529968, 685405217, 1229941886, 454506347, 159609031, 3917859954, 902548666, 1966600325, 899914423, 2003708560, 1004347321, 3307839951, 4086765452, 3685557904, 137317952, 1957718520, 4211640402, 1327042690, 216636596, 733670998, 3810788195, 3085620730, 2936617038, 551987707, 1211321711, 1677112964, 3014185582, 2464512087, 3975373838, 2693740779, 4065425783, 2140277822, 825749310, 2880671966, 1381228683, 103550174, 3674784752, 1960597023, 929201280, 2430373277, 3481927866, 432899824, 1359562362, 2275471063, 1656712782, 2763521467, 205591177, 3763929953, 2695795737, 387971453, 2590208821, 594749914, 904415423, 3674848740, 1052225522, 937977191, 1882812599, 883850001, 4243855019, 312877633, 4173447473, 212260586, 3496765458, 4234009075, 676180148, 2264142646, 2266534220, 1642159621, 1708415372, 3472399451, 3955845777, 2505585079, 3931889828, 80945554, 3725656909, 3388349519, 2202525279, 1798650506, 3272471166, 2357336492, 3254489616, 4139856840, 2366529915, 3445367892, 583504374, 935597860, 1567567372, 3369927236, 848974877, 3151108810, 2850369872, 342636068, 3381816747, 1615719219, 935298859, 79266910, 3401195668, 2276741804, 1877690794, 1820383989, 1706471957, 2888788550, 130995554, 2792152569, 310696089], "pos": 10}, "exits": {}, "cancels": {}, "failures": {}, "shutdown": false, "trials_closed": {}, "trial_progress": {"af8253d1-32a1-4c51-ac0d-46be56cbb697": 0, "d41173b1-6f39-49df-97fa-cc14655d1c87": 0}, "trials_created": {"af8253d1-32a1-4c51-ac0d-46be56cbb697": true, "d41173b1-6f39-49df-97fa-cc14655d1c87": true}, "trials_requested": 2, "search_method_state": {"pending_trials": 2, "remaining_trials": [{"x": 1, "dropout1": 0.2, "dropout2": 0.2, "n_filters1": 8, "n_filters2": 8, "learning_rate": 0.1}], "search_method_type": "grid"}, "completed_operations": {}}, "trial_searcher_state": {"af8253d1-32a1-4c51-ac0d-46be56cbb697": {"Op": {"Length": 937, "RequestID": "af8253d1-32a1-4c51-ac0d-46be56cbb697"}, "Closed": true, "Create": {"hparams": {"x": 3, "dropout1": 0.2, "dropout2": 0.2, "n_filters1": 8, "n_filters2": 8, "learning_rate": 0.1}, "checkpoint": null, "request_id": "af8253d1-32a1-4c51-ac0d-46be56cbb697", "trial_seed": 754687606, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "d41173b1-6f39-49df-97fa-cc14655d1c87": {"Op": {"Length": 937, "RequestID": "d41173b1-6f39-49df-97fa-cc14655d1c87"}, "Closed": true, "Create": {"hparams": {"x": 5, "dropout1": 0.2, "dropout2": 0.2, "n_filters1": 8, "n_filters2": 8, "learning_rate": 0.1}, "checkpoint": null, "request_id": "d41173b1-6f39-49df-97fa-cc14655d1c87", "trial_seed": 1156044955, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}}}`),
			//nolint:lll
			v5Snapshot: []byte(``),
		},
	}
	for _, c := range cases {
		snapshot, err := shimExperimentSnapshotV5(1, c.v4Snapshot)
		require.NoError(t, err)
		require.JSONEq(t, string(c.v5Snapshot), string(snapshot))
	}
}

func TestDeserExperimentSnapshotIntoCurrent(t *testing.T) {
	// This test tries to deserialize a copy of a the current experiment snapshot.
	// If this test fails, it means there was a breaking change to snapshots which may've not
	// received a shim. Please ensure there is a shim and fix this test for the next time.
	tests := []struct {
		name       string
		experiment func() *internalExperiment
		snapshot   []byte
	}{
		{
			name: "single",
			experiment: func() *internalExperiment {
				e := &internalExperiment{}
				//nolint:exhaustruct
				single := expconf.SearcherConfig{
					//nolint:exhaustruct
					RawSingleConfig: &expconf.SingleConfig{},
				}
				sm := searcher.NewSearchMethod(single)
				e.searcher = searcher.NewSearcher(0, sm, expconf.Hyperparameters{})
				return e
			},
			//nolint:lll
			snapshot: []byte(`{"searcher_state": {"rand": {"key": [2970094109, 656686882, 618108684, 3428065983, 3347811667, 2888225350, 3059306387, 3429410465, 120474970, 2272301777, 985108865, 991558874, 3272543769, 1573748485, 942809215, 3888215743, 2210951765, 1718115507, 3963921664, 3557444060, 1499923783, 1829703377, 750493200, 3411092685, 589595500, 2596144409, 1879328096, 1280550458, 2715466210, 2544141428, 1543312021, 2997818084, 765128503, 536629897, 1001278031, 956821445, 2736363088, 947342293, 3898485884, 3425929255, 356849665, 3772908806, 3623557158, 2612581302, 3580922597, 217692149, 2059015628, 2096894728, 1031554394, 2656443257, 856730792, 2596152358, 3710976744, 3544672276, 1734608805, 481137749, 969621572, 754645566, 4116998116, 79516852, 3779707014, 84449565, 2299776967, 3049981717, 209980308, 730595889, 475796649, 176283770, 945344397, 3533051341, 1815446302, 3773966474, 2608085762, 3988702430, 1364580973, 954047394, 3612132653, 772541827, 644272441, 189803165, 931375382, 345347493, 1070927534, 1233280688, 2977342360, 964860546, 311939975, 4227569059, 1111154497, 2670796852, 2936307495, 1340846895, 2187526044, 4049656992, 2523649560, 3366534695, 4129435744, 2210183795, 1260247727, 3172172609, 845427714, 2412303263, 4029524955, 496281340, 1521525374, 1068147028, 715985502, 4093783277, 2159512480, 133552717, 436985375, 3034348399, 1875037974, 4060219881, 2429216519, 1706838315, 3704003030, 1782549491, 3768045061, 3989593374, 93865362, 1767865857, 1137597591, 252302268, 3084248212, 619916972, 4054361685, 2046158286, 1812194877, 3286982519, 3624326839, 2208625006, 3161233673, 3006516503, 2024883981, 1656495788, 587227161, 3021529118, 3172394998, 3398906615, 615744671, 3472224112, 212954520, 1118562041, 1921307781, 1197366600, 1484195533, 1200554730, 729716373, 1652264122, 1007315030, 2434524607, 585522965, 1141433277, 278327678, 3497727325, 356102370, 1394639384, 1857470125, 735035053, 2157227949, 2119739569, 171894210, 839804861, 1047866560, 420010537, 1667233883, 352520083, 1757099499, 2384088069, 251603325, 4218299275, 3730818711, 1003235663, 299940149, 2645812204, 2480727500, 1622974487, 1629312940, 3982198086, 2956489407, 2625953102, 1319536795, 42594099, 1983096735, 973960638, 3621842015, 3277003271, 2353057652, 181048897, 971058611, 596055263, 916085615, 181371615, 1523808158, 1627674241, 1944135612, 1287953114, 427398813, 3657156653, 2038254583, 1728892774, 2979810975, 1203810426, 870115982, 2342890482, 239526972, 161374077, 1298609642, 3361627384, 1120507760, 2857852335, 1817591908, 2278524994, 2381282828, 390752450, 2583666345, 2894166573, 1090621184, 1216468230, 2471775878, 4007164892, 4120390730, 2245347208, 1747432849, 2659194233, 3123421709, 1394627981, 3642599365, 447037831, 2948358439, 2071590290, 620060883, 1189294322, 865221550, 1072574172, 4239383229, 3932654708, 977824870, 4090083517, 996564545, 2215368799, 1639088756, 1063294874, 2589869379, 2931882145, 1119478531, 2913543435, 2863960600, 2220278034, 1514566588, 2171894117, 1040890154, 613591648, 4213726618, 3733950164, 3557521554, 451572785, 1963683489, 2910238750, 1724590625, 2276900333, 2786477774, 194531157, 2427295372, 2668452276, 3024832162, 4118825874, 2048453723, 602839057, 1287626269, 391207769, 1490752784, 631791025, 3012581026, 2165558496, 711793093, 394391602, 3030359078, 753489044, 1912791312, 805796394, 3405161241, 2387156388, 3012369288, 785079410, 1579291678, 2186594177, 1466653116, 2597054161, 2032480878, 2608593331, 245623596, 4030340391, 4102274438, 1820069747, 861878589, 1987396926, 1234162528, 4203068184, 4247911765, 675763300, 776602741, 2725860139, 1101969549, 2417348663, 3640520171, 4117232477, 1498968755, 1465742592, 978609897, 207663660, 3872867123, 2345883885, 3859129626, 2085742042, 2849699660, 766128209, 1220321488, 4036832842, 2625520262, 1672441713, 68307500, 1664835655, 4277760737, 2834495524, 1659112114, 4058377674, 3503936154, 3460939589, 1534417391, 546891454, 2119405354, 1342659996, 4063240713, 2470735676, 4263599371, 1004146457, 4110714736, 161171862, 3755105332, 2045654769, 3373580076, 3804959282, 172165195, 1513507373, 756508282, 2395802730, 1042880862, 424954450, 3528754016, 705074650, 1657675167, 3512260741, 1502017722, 3914739402, 2193244645, 2422500613, 99094108, 2136256596, 2765564582, 1469408647, 422762387, 4256532504, 2587902689, 322034733, 869598360, 1591826706, 3537194108, 432319981, 3238387140, 3998122956, 1638675667, 2820632381, 2704736212, 1001829652, 3842914244, 2163956861, 1247332102, 4161816793, 1047179830, 3332934466, 3373357404, 1755466786, 2066857771, 3041960543, 1984594045, 2873866111, 625922821, 2084260334, 647387503, 1795267011, 2734649093, 1429118207, 1763491842, 2499417212, 1322753865, 2546278618, 3069808828, 2758040961, 2095345089, 1117531393, 1079149953, 199028389, 5727143, 2626507809, 1394644924, 2371859674, 3378009021, 663183580, 1964126253, 4253076758, 1951862122, 3318205484, 246506769, 2065283265, 4062893977, 1357669276, 1910189941, 1768248614, 2642642591, 3082965658, 2821926795, 3387815148, 3811042618, 47443245, 1219528119, 2554982004, 3265451419, 2888244446, 4219157977, 970880074, 1607338684, 3191412771, 2649941819, 3075671217, 1402753481, 4075173340, 1295557797, 911791588, 847594689, 2359505701, 3661496760, 733404895, 249867897, 1640333750, 582965187, 1381547711, 2657453162, 1011026771, 2180307770, 52701968, 2169192963, 3746362727, 509530176, 4097693696, 406641367, 2522117714, 2016171603, 2069773173, 3084060900, 1332397153, 1412022588, 1875059352, 3676296777, 3375212542, 1306176142, 133024327, 2608708004, 139194617, 519502757, 1353538952, 3608390217, 3046145872, 1399364698, 4125351745, 572217286, 2142672378, 2889903141, 3434412210, 2393320012, 3956475466, 562179437, 3542566562, 3807446953, 1580557399, 3614175239, 3960865405, 3703717660, 2310530500, 1372501162, 3987983520, 2273295537, 3041676882, 1184238826, 1347025024, 1978741180, 1085872423, 3721856454, 4017856803, 3452381717, 2476724512, 3844971453, 3783643616, 1806640004, 945069700, 146817685, 3591154906, 3316795159, 3055211927, 3538095801, 2794589177, 2749831736, 3448467389, 2625023521, 183144251, 1181880302, 2668701387, 1211953638, 2740205019, 1424192308, 3005227360, 3518579311, 2030094765, 2163439322, 528876425, 713989960, 49680970, 3843683734, 2284197334, 754118913, 3660862775, 2811591585, 1900142815, 909665247, 3587945731, 1738555018, 4017103008, 363980482, 3596395463, 4036688775, 562009149, 652191781, 3255386890, 742878000, 9948449, 1293599923, 3198724758, 1824688996, 971993200, 545911088, 3111974979, 548678661, 3540201872, 347949716, 3899497825, 3919059349, 4023520489, 3906867502, 2926287461, 1975024135, 1961216548, 4241655703, 882861834, 447828602, 1073917811, 3204969134, 3637120523, 2561353660, 3087651888, 2625085299, 3045978593, 3296945077, 3353240266, 264317791, 3618427144, 3041663648, 3129441565, 1614617882, 742204376, 107307162, 4015043056, 164246162, 2971078786, 3420066832, 1704293461, 459244372, 744914593, 710366705, 2599447851, 3652089701, 712803605, 2980013293, 476563708, 1665840194, 1037190002, 3225477896, 1430942116, 2632665368, 3730881422, 1625879865, 363179597, 3829523707, 14110766, 1150504976, 2891936857, 256611346, 774302498, 184441060, 803067320, 3354307461, 2067530913, 466995748, 1177075098, 4068208859, 1923629384, 3949860772, 3830641659, 1017128665, 2972991357, 4238922926, 575232160, 101928834, 2405116568], "pos": 5}, "exits": {}, "failures": {}, "shutdown": false, "trials_closed": {}, "trial_progress": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": 0}, "trials_created": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": true}, "trials_requested": 1, "search_method_state": {"created_trials": 1, "pending_trials": 1, "search_method_type": "single"}, "completed_operations": {}}, "trial_searcher_state": {"bb239c3a-c6b5-4ef3-ba7b-118038bd0d06": {"Op": {"Length": 937, "RequestID": "bb239c3a-c6b5-4ef3-ba7b-118038bd0d06"}, "Closed": true, "Create": {"hparams": {"dropout1": 0.25, "dropout2": 0.5, "n_filters1": 32, "n_filters2": 64, "learning_rate": 1, "global_batch_size": 64}, "checkpoint": null, "request_id": "bb239c3a-c6b5-4ef3-ba7b-118038bd0d06", "trial_seed": 1757369869, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}}}`),
		},
		{
			name: "asha",
			experiment: func() *internalExperiment {
				e := &internalExperiment{}
				//nolint:exhaustruct
				asha := expconf.SearcherConfig{
					//nolint:exhaustruct
					RawAsyncHalvingConfig: &expconf.AsyncHalvingConfig{
						RawNumRungs:   ptrs.Ptr(4),
						RawMaxTime:    ptrs.Ptr(937),
						RawTimeMetric: ptrs.Ptr("batches"),
						RawDivisor:    ptrs.Ptr[float64](4),
					},
					RawSmallerIsBetter: ptrs.Ptr(true),
				}
				sm := searcher.NewSearchMethod(asha)
				e.searcher = searcher.NewSearcher(0, sm, expconf.Hyperparameters{})
				return e
			},
			//nolint:lll
			snapshot: []byte(`{"searcher_state": {"rand": {"key": [1858898874, 3136713915, 1245759550, 1290970761, 517441830, 3965724506, 3061357240, 170072766, 1693351111, 4075410292, 78151388, 3493175442, 451004311, 1812236155, 355118118, 2341554586, 3606578038, 1939667144, 2365456278, 4240753950, 3356447601, 2335017104, 2040721097, 3800998272, 2728642800, 2131115629, 492734985, 2819783747, 3003215375, 4204037864, 4126695697, 549891058, 734125689, 31409235, 985387360, 3038862999, 954240667, 2621873052, 1848091170, 133174459, 3856584872, 124845556, 460434664, 46791082, 4152381650, 4173967752, 1247237436, 174835189, 1742324874, 2007241764, 1640712598, 2310183041, 3511885426, 578000042, 706952488, 3805905197, 1542555822, 1232482704, 113479587, 2075606872, 1810250676, 4154209381, 4104047634, 2798916177, 1973933529, 2923443846, 448405122, 3166808065, 2849599398, 468126651, 2661086816, 1991933754, 682920740, 2267700733, 4109317397, 1130169565, 3047640000, 3252889878, 3054398763, 2806904880, 2855243624, 3038966390, 1241065902, 2729169001, 815645434, 1162355224, 704271692, 536316416, 2670268274, 4163301069, 4085384831, 291065618, 1546534018, 1328639211, 2136729346, 1649093914, 1950870460, 3051014222, 4026077910, 2922618107, 2381221227, 1814305839, 2087985637, 4161848789, 128854472, 2943029177, 728532032, 3490598714, 669817953, 2440038690, 3555401139, 2712280152, 384719815, 2442045992, 613477876, 1377552755, 2711705298, 3724688321, 4067433634, 1545601253, 646274014, 1377898108, 240985165, 371546231, 3046184253, 2117921649, 2247989848, 2061520991, 956268219, 97033364, 175144327, 1353593441, 1476979375, 454979253, 762796608, 2575191972, 107577675, 1028450605, 1873422748, 2542366410, 1866320548, 3589705747, 345592247, 2892036283, 3170978743, 3572903695, 3028956090, 2207819198, 1950852740, 1313260327, 3971819579, 1504837033, 4070108073, 359514223, 1902603031, 3271335576, 3157069217, 2191931698, 1256929557, 421027589, 4212835066, 4062519531, 296513181, 2106428114, 549774238, 393306693, 1174412267, 3955316363, 2441986612, 1523312170, 982121345, 1785954095, 4080295649, 299131628, 393188011, 3374589678, 4024606822, 1686014117, 1197296932, 2797619434, 3649470375, 2716003058, 86300908, 3697562572, 3237922847, 1160822791, 3374522836, 3979525117, 2212718065, 1148293750, 1919573177, 3469185829, 1712413795, 380808588, 471126594, 948789273, 3532936578, 296952917, 2753628341, 2057043750, 920211988, 600572981, 2774709890, 1819324959, 2259319642, 574572799, 3073898101, 3230354882, 2678617999, 3641549837, 2132486047, 2765479196, 1727422873, 3997112925, 471821958, 92070175, 619429912, 1550462124, 2347682773, 1567881080, 1842852436, 3821419603, 3591165196, 2535124603, 3618924873, 2628843537, 1170033179, 348211080, 3822572799, 749527186, 1398111115, 727305496, 3543922887, 1648448468, 917342585, 3626786227, 795087139, 3407120437, 3355836138, 1410515106, 2720308312, 3240564741, 3959711847, 1124409684, 552560209, 3461944805, 678032564, 1103992569, 2470254354, 1641770510, 1556963167, 2379222670, 442642977, 2742252027, 1950349383, 2063177700, 2732950260, 4185258652, 2168049423, 1082372904, 1362620822, 1741310903, 901367838, 3508554445, 1348790639, 2317903621, 3373951142, 1337343925, 3840044638, 1485094307, 4248249804, 4093032023, 2136011, 1334492457, 2503063800, 2538115118, 2466171479, 1639514097, 464469616, 1764593097, 4213907472, 3313535300, 1076926430, 1725535044, 1011006056, 3988586498, 2745469741, 2906100946, 3576331813, 82093349, 429491095, 2114758070, 933184772, 3917920972, 1890858429, 531920684, 2456575097, 420691463, 748296319, 1079814478, 4024156541, 813238500, 1077678765, 2465759496, 3962103589, 2065972465, 3456128976, 2094509478, 2645396852, 2925520141, 1161978458, 2035040231, 4099469514, 1972456981, 3786725514, 3058419285, 3818057337, 2430215031, 1937931725, 2515478709, 1847103536, 4155632999, 1328666540, 4158737985, 2754971121, 2211399759, 2853435464, 3261493685, 4150017738, 3342340355, 775224247, 2961220606, 614027509, 3160064455, 3414222376, 2091154502, 280950518, 925950753, 566408845, 2596638294, 3135099147, 2706786311, 1388405449, 2816679388, 1623101484, 3178371694, 3291179795, 4116991785, 67859698, 845643000, 760347068, 1455100406, 2912358999, 2105127, 702301878, 1202736257, 1342813496, 575012872, 1865672624, 2657430022, 644622144, 2333997711, 1488359185, 4066857739, 3973656318, 2828413897, 3450795915, 1884785401, 1930824357, 1051770001, 3572092020, 1862280154, 3461196456, 3800146563, 1633638066, 1452346239, 534900790, 3121061430, 2916315663, 4255721426, 2887119093, 1871569903, 1332276432, 654698363, 3249099829, 863175434, 136189354, 3475430455, 2548971290, 2855268040, 3442424632, 804140083, 3514822970, 3941128355, 1313049612, 2892025674, 704113086, 2375636355, 3010471523, 1804040519, 682699732, 3588164492, 2899686231, 1835583680, 1773430431, 1098795657, 593519929, 125730791, 3274894119, 3824589328, 378493220, 1626526963, 3831253813, 3392887684, 1584863613, 3559778327, 2663823706, 3923032836, 3600949771, 1780734363, 3234463836, 3308378262, 1986979169, 2249473811, 2903716227, 3677580360, 1437072767, 3381143691, 3635683729, 3252548987, 1423467992, 1159796525, 126415660, 1073122400, 4213681404, 1155308855, 2805178822, 2953363327, 2150137973, 3240821181, 1698262113, 3278041312, 1513835831, 594252990, 2719832498, 2171241681, 3185876351, 1036634921, 1136285885, 4293927994, 2470722457, 4240063557, 2637317952, 161087848, 4147589514, 3912003562, 3965637509, 2793578416, 2291662622, 3749525828, 4282881950, 3280195163, 484269631, 2746175909, 3446976909, 2867607820, 395936285, 3321864120, 4273485048, 1086468822, 2838328381, 1644558158, 1834777629, 483686628, 1256155081, 2330382284, 2755082552, 4194834958, 391405988, 3209673909, 1870065414, 3052141802, 775165415, 4149272392, 194931648, 2367265709, 3891336490, 1229306547, 3012235584, 3643629589, 832189420, 469287166, 1525326108, 267712853, 410832606, 3637702001, 1293947797, 2676100704, 3127780282, 1522722013, 2987243003, 4223119695, 2471565775, 3741486091, 2517288835, 1421919913, 2170944291, 3677925623, 2433847083, 2055300628, 1274730272, 4194354236, 3445728648, 1457079160, 530533758, 2650792665, 3386458153, 2521874364, 1903579212, 761566114, 1632275601, 3215030020, 14846682, 3063448941, 726016154, 2228712970, 4195077512, 4196716184, 2434034522, 1909349859, 3301955567, 2777200877, 4292042460, 1199269432, 685902762, 2499240636, 1122335115, 439154079, 4168729086, 496834902, 2182051026, 4131884045, 1839561063, 39520120, 866177038, 827878713, 1764316880, 206451689, 2373512346, 2172390722, 3933252186, 3127637834, 2071541478, 3960855872, 1444619351, 1938511308, 3721638501, 1259236365, 4226881135, 610757816, 838627681, 1588715647, 1972104498, 2054289333, 419545885, 2474876715, 1254095866, 634279673, 3761069612, 1633198557, 2273078632, 3566317607, 1787529366, 1415431672, 3275737983, 2504574445, 430721643, 2335224241, 4010159314, 3152956030, 3456999186, 3382584293, 2802928282, 1378465088, 4251009334, 2588165208, 243375617, 3821815786, 4098223378, 4161610756, 1935733261, 2023780182, 3371959456, 2139155484, 2612371408, 338927672, 147433055, 1797581704, 3653488639, 2425792923, 888477626, 3057409903, 1694686933, 4004894142, 1992613109, 370443325, 227467078, 3544764567, 491152413, 2983604173, 2939234591, 157854636, 464880009, 2362768353, 2772766616, 932280116, 1106584051, 2213427382, 2869551831, 1522462666, 2481374380, 2796644796, 753754775, 1586605155], "pos": 112}, "exits": {}, "failures": {}, "shutdown": false, "trials_closed": {}, "trial_progress": {"3a77d780-1fb2-4af0-ae41-180c346cfcf8": 0}, "trials_created": {"3a77d780-1fb2-4af0-ae41-180c346cfcf8": true}, "trials_requested": 16, "search_method_state": {"trial_table": {"1648b3b2-74e9-439f-8e94-bfae278ea93d": 1, "19e57eb7-eb24-46fa-b740-21caab57a9d1": 1, "2bd1e7ff-5103-41df-9fa3-1ff4fc7acc14": 0, "306cd910-0605-4c85-84f3-5e6757ea1d01": 1, "3a77d780-1fb2-4af0-ae41-180c346cfcf8": 1, "45e6cca0-42a6-44be-8b58-88b20b00357e": 0, "65b30b87-e141-41fe-8816-7e1ee1a0ff36": 0, "69129b1e-843a-4879-8d8a-d0d02b696649": 0, "b383f52f-10be-4c55-adb7-2d0f75d6686d": 0, "beda8c08-e5b9-4861-b39c-c4e866297709": 0, "bf2b30d7-301f-48bb-8b35-a20b341291cb": 1, "cea43969-c629-4d82-830f-dcb47319e025": 1, "d8342b8c-3925-4ae8-b142-0b552b98223d": 1, "eee2da18-1bd9-449e-b247-906917d06878": 0, "fad2b882-e6cd-4f57-b285-613e3e699933": 0, "fafa3fd7-6bf5-447f-8ef8-f5001060b767": 1}, "sub_search_states": [{"rungs": [{"metrics": null, "start_trials": 0, "units_needed": 40, "promote_trials": 0, "outstanding_trials": 0}, {"metrics": null, "start_trials": 0, "units_needed": 200, "promote_trials": 0, "outstanding_trials": 0}, {"metrics": null, "start_trials": 0, "units_needed": 840, "promote_trials": 0, "outstanding_trials": 0}], "trial_rungs": {"2bd1e7ff-5103-41df-9fa3-1ff4fc7acc14": 0, "45e6cca0-42a6-44be-8b58-88b20b00357e": 0, "65b30b87-e141-41fe-8816-7e1ee1a0ff36": 0, "69129b1e-843a-4879-8d8a-d0d02b696649": 0, "b383f52f-10be-4c55-adb7-2d0f75d6686d": 0, "beda8c08-e5b9-4861-b39c-c4e866297709": 0, "eee2da18-1bd9-449e-b247-906917d06878": 0, "fad2b882-e6cd-4f57-b285-613e3e699933": 0}, "closed_trials": {}, "invalid_trials": 0, "pending_trials": 8, "trials_completed": 0, "early_exit_trials": {}, "search_method_type": "asha"}, {"rungs": [{"metrics": null, "start_trials": 0, "units_needed": 160, "promote_trials": 0, "outstanding_trials": 1}, {"metrics": null, "start_trials": 0, "units_needed": 800, "promote_trials": 0, "outstanding_trials": 0}], "trial_rungs": {"1648b3b2-74e9-439f-8e94-bfae278ea93d": 0, "19e57eb7-eb24-46fa-b740-21caab57a9d1": 0, "306cd910-0605-4c85-84f3-5e6757ea1d01": 0, "3a77d780-1fb2-4af0-ae41-180c346cfcf8": 0, "bf2b30d7-301f-48bb-8b35-a20b341291cb": 0, "cea43969-c629-4d82-830f-dcb47319e025": 0, "d8342b8c-3925-4ae8-b142-0b552b98223d": 0, "fafa3fd7-6bf5-447f-8ef8-f5001060b767": 0}, "closed_trials": {}, "invalid_trials": 0, "pending_trials": 8, "trials_completed": 0, "early_exit_trials": {}, "search_method_type": "asha"}], "search_method_type": "adaptive_asha", "sub_search_units_completed": [0, 0]}, "completed_operations": {}}, "trial_searcher_state": {"1648b3b2-74e9-439f-8e94-bfae278ea93d": {"Op": {"Length": 160, "RequestID": "1648b3b2-74e9-439f-8e94-bfae278ea93d"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.5750164976379073, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "1648b3b2-74e9-439f-8e94-bfae278ea93d", "trial_seed": 2143610236, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "19e57eb7-eb24-46fa-b740-21caab57a9d1": {"Op": {"Length": 160, "RequestID": "19e57eb7-eb24-46fa-b740-21caab57a9d1"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.5816375181302468, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "19e57eb7-eb24-46fa-b740-21caab57a9d1", "trial_seed": 421951454, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "2bd1e7ff-5103-41df-9fa3-1ff4fc7acc14": {"Op": {"Length": 40, "RequestID": "2bd1e7ff-5103-41df-9fa3-1ff4fc7acc14"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.7684118342109852, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "2bd1e7ff-5103-41df-9fa3-1ff4fc7acc14", "trial_seed": 212852662, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "306cd910-0605-4c85-84f3-5e6757ea1d01": {"Op": {"Length": 160, "RequestID": "306cd910-0605-4c85-84f3-5e6757ea1d01"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.8331292167743722, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "306cd910-0605-4c85-84f3-5e6757ea1d01", "trial_seed": 1609725763, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "3a77d780-1fb2-4af0-ae41-180c346cfcf8": {"Op": {"Length": 160, "RequestID": "3a77d780-1fb2-4af0-ae41-180c346cfcf8"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.8471874828144244, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "3a77d780-1fb2-4af0-ae41-180c346cfcf8", "trial_seed": 2105514700, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "45e6cca0-42a6-44be-8b58-88b20b00357e": {"Op": {"Length": 40, "RequestID": "45e6cca0-42a6-44be-8b58-88b20b00357e"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.7217543249722611, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "45e6cca0-42a6-44be-8b58-88b20b00357e", "trial_seed": 1245324437, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "65b30b87-e141-41fe-8816-7e1ee1a0ff36": {"Op": {"Length": 40, "RequestID": "65b30b87-e141-41fe-8816-7e1ee1a0ff36"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.8213712160318751, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "65b30b87-e141-41fe-8816-7e1ee1a0ff36", "trial_seed": 599927259, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "69129b1e-843a-4879-8d8a-d0d02b696649": {"Op": {"Length": 40, "RequestID": "69129b1e-843a-4879-8d8a-d0d02b696649"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.8661962084783181, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "69129b1e-843a-4879-8d8a-d0d02b696649", "trial_seed": 1023174740, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "b383f52f-10be-4c55-adb7-2d0f75d6686d": {"Op": {"Length": 40, "RequestID": "b383f52f-10be-4c55-adb7-2d0f75d6686d"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.5359870317307868, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "b383f52f-10be-4c55-adb7-2d0f75d6686d", "trial_seed": 1099784968, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "beda8c08-e5b9-4861-b39c-c4e866297709": {"Op": {"Length": 40, "RequestID": "beda8c08-e5b9-4861-b39c-c4e866297709"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.7829296920408424, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "beda8c08-e5b9-4861-b39c-c4e866297709", "trial_seed": 1740151796, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "bf2b30d7-301f-48bb-8b35-a20b341291cb": {"Op": {"Length": 160, "RequestID": "bf2b30d7-301f-48bb-8b35-a20b341291cb"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.6767256393511032, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "bf2b30d7-301f-48bb-8b35-a20b341291cb", "trial_seed": 981345028, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "cea43969-c629-4d82-830f-dcb47319e025": {"Op": {"Length": 160, "RequestID": "cea43969-c629-4d82-830f-dcb47319e025"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.854520819444287, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "cea43969-c629-4d82-830f-dcb47319e025", "trial_seed": 575167432, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "d8342b8c-3925-4ae8-b142-0b552b98223d": {"Op": {"Length": 160, "RequestID": "d8342b8c-3925-4ae8-b142-0b552b98223d"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.7231724660254734, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "d8342b8c-3925-4ae8-b142-0b552b98223d", "trial_seed": 2032674049, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "eee2da18-1bd9-449e-b247-906917d06878": {"Op": {"Length": 40, "RequestID": "eee2da18-1bd9-449e-b247-906917d06878"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.8005169955058526, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "eee2da18-1bd9-449e-b247-906917d06878", "trial_seed": 1209630132, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "fad2b882-e6cd-4f57-b285-613e3e699933": {"Op": {"Length": 40, "RequestID": "fad2b882-e6cd-4f57-b285-613e3e699933"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.6903862897512029, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "fad2b882-e6cd-4f57-b285-613e3e699933", "trial_seed": 86866247, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}, "fafa3fd7-6bf5-447f-8ef8-f5001060b767": {"Op": {"Length": 160, "RequestID": "fafa3fd7-6bf5-447f-8ef8-f5001060b767"}, "Closed": false, "Create": {"hparams": {"metrics_base": 0.5785735939157665, "metrics_sigma": 0, "global_batch_size": 32, "metrics_progression": "decreasing"}, "checkpoint": null, "request_id": "fafa3fd7-6bf5-447f-8ef8-f5001060b767", "trial_seed": 1213847999, "workload_sequencer_type": "TRIAL_WORKLOAD_SEQUENCER"}, "Complete": false}}}`),
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			e := tt.experiment()
			require.NoError(t, e.restore(tt.snapshot))
		})
	}
}
